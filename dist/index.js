"use strict";var as=Object.create;var We=Object.defineProperty;var cs=Object.getOwnPropertyDescriptor;var us=Object.getOwnPropertyNames;var ls=Object.getPrototypeOf,fs=Object.prototype.hasOwnProperty;var j=(t,e)=>()=>(t&&(e=t(t=0)),e);var w=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),ds=(t,e)=>{for(var r in e)We(t,r,{get:e[r],enumerable:!0})},Pr=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of us(e))!fs.call(t,i)&&i!==r&&We(t,i,{get:()=>e[i],enumerable:!(n=cs(e,i))||n.enumerable});return t};var I=(t,e,r)=>(r=t!=null?as(ls(t)):{},Pr(e||!t||!t.__esModule?We(r,"default",{value:t,enumerable:!0}):r,t)),hs=t=>Pr(We({},"__esModule",{value:!0}),t);var He=w(pe=>{"use strict";Object.defineProperty(pe,"__esModule",{value:!0});pe.toCommandProperties=pe.toCommandValue=void 0;function ms(t){return t==null?"":typeof t=="string"||t instanceof String?t:JSON.stringify(t)}pe.toCommandValue=ms;function ps(t){return Object.keys(t).length?{title:t.title,file:t.file,line:t.startLine,endLine:t.endLine,col:t.startColumn,endColumn:t.endColumn}:{}}pe.toCommandProperties=ps});var $r=w(z=>{"use strict";var _s=z&&z.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),gs=z&&z.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),ys=z&&z.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.hasOwnProperty.call(t,r)&&_s(e,t,r);return gs(e,t),e};Object.defineProperty(z,"__esModule",{value:!0});z.issue=z.issueCommand=void 0;var ws=ys(require("os")),Nr=He();function Dr(t,e,r){let n=new Et(t,e,r);process.stdout.write(n.toString()+ws.EOL)}z.issueCommand=Dr;function bs(t,e=""){Dr(t,{},e)}z.issue=bs;var Ar="::",Et=class{constructor(e,r,n){e||(e="missing.command"),this.command=e,this.properties=r,this.message=n}toString(){let e=Ar+this.command;if(this.properties&&Object.keys(this.properties).length>0){e+=" ";let r=!0;for(let n in this.properties)if(this.properties.hasOwnProperty(n)){let i=this.properties[n];i&&(r?r=!1:e+=",",e+=`${n}=${Ss(i)}`)}}return e+=`${Ar}${vs(this.message)}`,e}};function vs(t){return Nr.toCommandValue(t).replace(/%/g,"%25").replace(/\r/g,"%0D").replace(/\n/g,"%0A")}function Ss(t){return Nr.toCommandValue(t).replace(/%/g,"%25").replace(/\r/g,"%0D").replace(/\n/g,"%0A").replace(/:/g,"%3A").replace(/,/g,"%2C")}});function De(){return Qe>Ke.length-16&&(Br.default.randomFillSync(Ke),Qe=0),Ke.slice(Qe,Qe+=16)}var Br,Ke,Qe,It=j(()=>{Br=I(require("crypto")),Ke=new Uint8Array(256),Qe=Ke.length});var Lr,qr=j(()=>{Lr=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i});function xs(t){return typeof t=="string"&&Lr.test(t)}var re,$e=j(()=>{qr();re=xs});function Os(t,e=0){let r=(B[t[e+0]]+B[t[e+1]]+B[t[e+2]]+B[t[e+3]]+"-"+B[t[e+4]]+B[t[e+5]]+"-"+B[t[e+6]]+B[t[e+7]]+"-"+B[t[e+8]]+B[t[e+9]]+"-"+B[t[e+10]]+B[t[e+11]]+B[t[e+12]]+B[t[e+13]]+B[t[e+14]]+B[t[e+15]]).toLowerCase();if(!re(r))throw TypeError("Stringified UUID is invalid");return r}var B,ne,Be=j(()=>{$e();B=[];for(let t=0;t<256;++t)B.push((t+256).toString(16).substr(1));ne=Os});function Es(t,e,r){let n=e&&r||0,i=e||new Array(16);t=t||{};let o=t.node||jr,s=t.clockseq!==void 0?t.clockseq:Tt;if(o==null||s==null){let d=t.random||(t.rng||De)();o==null&&(o=jr=[d[0]|1,d[1],d[2],d[3],d[4],d[5]]),s==null&&(s=Tt=(d[6]<<8|d[7])&16383)}let a=t.msecs!==void 0?t.msecs:Date.now(),u=t.nsecs!==void 0?t.nsecs:Rt+1,c=a-Ct+(u-Rt)/1e4;if(c<0&&t.clockseq===void 0&&(s=s+1&16383),(c<0||a>Ct)&&t.nsecs===void 0&&(u=0),u>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");Ct=a,Rt=u,Tt=s,a+=122192928e5;let l=((a&268435455)*1e4+u)%4294967296;i[n++]=l>>>24&255,i[n++]=l>>>16&255,i[n++]=l>>>8&255,i[n++]=l&255;let f=a/4294967296*1e4&268435455;i[n++]=f>>>8&255,i[n++]=f&255,i[n++]=f>>>24&15|16,i[n++]=f>>>16&255,i[n++]=s>>>8|128,i[n++]=s&255;for(let d=0;d<6;++d)i[n+d]=o[d];return e||ne(i)}var jr,Tt,Ct,Rt,Mr,kr=j(()=>{It();Be();Ct=0,Rt=0;Mr=Es});function Is(t){if(!re(t))throw TypeError("Invalid UUID");let e,r=new Uint8Array(16);return r[0]=(e=parseInt(t.slice(0,8),16))>>>24,r[1]=e>>>16&255,r[2]=e>>>8&255,r[3]=e&255,r[4]=(e=parseInt(t.slice(9,13),16))>>>8,r[5]=e&255,r[6]=(e=parseInt(t.slice(14,18),16))>>>8,r[7]=e&255,r[8]=(e=parseInt(t.slice(19,23),16))>>>8,r[9]=e&255,r[10]=(e=parseInt(t.slice(24,36),16))/1099511627776&255,r[11]=e/4294967296&255,r[12]=e>>>24&255,r[13]=e>>>16&255,r[14]=e>>>8&255,r[15]=e&255,r}var Xe,Pt=j(()=>{$e();Xe=Is});function Ts(t){t=unescape(encodeURIComponent(t));let e=[];for(let r=0;r<t.length;++r)e.push(t.charCodeAt(r));return e}function Ye(t,e,r){function n(i,o,s,a){if(typeof i=="string"&&(i=Ts(i)),typeof o=="string"&&(o=Xe(o)),o.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let u=new Uint8Array(16+i.length);if(u.set(o),u.set(i,o.length),u=r(u),u[6]=u[6]&15|e,u[8]=u[8]&63|128,s){a=a||0;for(let c=0;c<16;++c)s[a+c]=u[c];return s}return ne(u)}try{n.name=t}catch{}return n.DNS=Cs,n.URL=Rs,n}var Cs,Rs,At=j(()=>{Be();Pt();Cs="6ba7b810-9dad-11d1-80b4-00c04fd430c8",Rs="6ba7b811-9dad-11d1-80b4-00c04fd430c8"});function Ps(t){return Array.isArray(t)?t=Buffer.from(t):typeof t=="string"&&(t=Buffer.from(t,"utf8")),Ur.default.createHash("md5").update(t).digest()}var Ur,Fr,Gr=j(()=>{Ur=I(require("crypto"));Fr=Ps});var As,Vr,Jr=j(()=>{At();Gr();As=Ye("v3",48,Fr),Vr=As});function Ns(t,e,r){t=t||{};let n=t.random||(t.rng||De)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){r=r||0;for(let i=0;i<16;++i)e[r+i]=n[i];return e}return ne(n)}var zr,Wr=j(()=>{It();Be();zr=Ns});function Ds(t){return Array.isArray(t)?t=Buffer.from(t):typeof t=="string"&&(t=Buffer.from(t,"utf8")),Hr.default.createHash("sha1").update(t).digest()}var Hr,Qr,Kr=j(()=>{Hr=I(require("crypto"));Qr=Ds});var $s,Xr,Yr=j(()=>{At();Kr();$s=Ye("v5",80,Qr),Xr=$s});var Zr,en=j(()=>{Zr="00000000-0000-0000-0000-000000000000"});function Bs(t){if(!re(t))throw TypeError("Invalid UUID");return parseInt(t.substr(14,1),16)}var tn,rn=j(()=>{$e();tn=Bs});var nn={};ds(nn,{NIL:()=>Zr,parse:()=>Xe,stringify:()=>ne,v1:()=>Mr,v3:()=>Vr,v4:()=>zr,v5:()=>Xr,validate:()=>re,version:()=>tn});var on=j(()=>{kr();Jr();Wr();Yr();en();rn();$e();Be();Pt()});var un=w(W=>{"use strict";var Ls=W&&W.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),qs=W&&W.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),an=W&&W.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.hasOwnProperty.call(t,r)&&Ls(e,t,r);return qs(e,t),e};Object.defineProperty(W,"__esModule",{value:!0});W.prepareKeyValueMessage=W.issueFileCommand=void 0;var sn=an(require("fs")),Nt=an(require("os")),js=(on(),hs(nn)),cn=He();function Ms(t,e){let r=process.env[`GITHUB_${t}`];if(!r)throw new Error(`Unable to find environment variable for file command ${t}`);if(!sn.existsSync(r))throw new Error(`Missing file at path: ${r}`);sn.appendFileSync(r,`${cn.toCommandValue(e)}${Nt.EOL}`,{encoding:"utf8"})}W.issueFileCommand=Ms;function ks(t,e){let r=`ghadelimiter_${js.v4()}`,n=cn.toCommandValue(e);if(t.includes(r))throw new Error(`Unexpected input: name should not contain the delimiter "${r}"`);if(n.includes(r))throw new Error(`Unexpected input: value should not contain the delimiter "${r}"`);return`${t}<<${r}${Nt.EOL}${n}${Nt.EOL}${r}`}W.prepareKeyValueMessage=ks});var fn=w(_e=>{"use strict";Object.defineProperty(_e,"__esModule",{value:!0});_e.checkBypass=_e.getProxyUrl=void 0;function Us(t){let e=t.protocol==="https:";if(ln(t))return;let r=(()=>e?process.env.https_proxy||process.env.HTTPS_PROXY:process.env.http_proxy||process.env.HTTP_PROXY)();if(r)return new URL(r)}_e.getProxyUrl=Us;function ln(t){if(!t.hostname)return!1;let e=t.hostname;if(Fs(e))return!0;let r=process.env.no_proxy||process.env.NO_PROXY||"";if(!r)return!1;let n;t.port?n=Number(t.port):t.protocol==="http:"?n=80:t.protocol==="https:"&&(n=443);let i=[t.hostname.toUpperCase()];typeof n=="number"&&i.push(`${i[0]}:${n}`);for(let o of r.split(",").map(s=>s.trim().toUpperCase()).filter(s=>s))if(o==="*"||i.some(s=>s===o||s.endsWith(`.${o}`)||o.startsWith(".")&&s.endsWith(`${o}`)))return!0;return!1}_e.checkBypass=ln;function Fs(t){let e=t.toLowerCase();return e==="localhost"||e.startsWith("127.")||e.startsWith("[::1]")||e.startsWith("[0:0:0:0:0:0:0:1]")}});var pn=w(ge=>{"use strict";var Rl=require("net"),Gs=require("tls"),Dt=require("http"),dn=require("https"),Vs=require("events"),Pl=require("assert"),Js=require("util");ge.httpOverHttp=zs;ge.httpsOverHttp=Ws;ge.httpOverHttps=Hs;ge.httpsOverHttps=Qs;function zs(t){var e=new Z(t);return e.request=Dt.request,e}function Ws(t){var e=new Z(t);return e.request=Dt.request,e.createSocket=hn,e.defaultPort=443,e}function Hs(t){var e=new Z(t);return e.request=dn.request,e}function Qs(t){var e=new Z(t);return e.request=dn.request,e.createSocket=hn,e.defaultPort=443,e}function Z(t){var e=this;e.options=t||{},e.proxyOptions=e.options.proxy||{},e.maxSockets=e.options.maxSockets||Dt.Agent.defaultMaxSockets,e.requests=[],e.sockets=[],e.on("free",function(n,i,o,s){for(var a=mn(i,o,s),u=0,c=e.requests.length;u<c;++u){var l=e.requests[u];if(l.host===a.host&&l.port===a.port){e.requests.splice(u,1),l.request.onSocket(n);return}}n.destroy(),e.removeSocket(n)})}Js.inherits(Z,Vs.EventEmitter);Z.prototype.addRequest=function(e,r,n,i){var o=this,s=$t({request:e},o.options,mn(r,n,i));if(o.sockets.length>=this.maxSockets){o.requests.push(s);return}o.createSocket(s,function(a){a.on("free",u),a.on("close",c),a.on("agentRemove",c),e.onSocket(a);function u(){o.emit("free",a,s)}function c(l){o.removeSocket(a),a.removeListener("free",u),a.removeListener("close",c),a.removeListener("agentRemove",c)}})};Z.prototype.createSocket=function(e,r){var n=this,i={};n.sockets.push(i);var o=$t({},n.proxyOptions,{method:"CONNECT",path:e.host+":"+e.port,agent:!1,headers:{host:e.host+":"+e.port}});e.localAddress&&(o.localAddress=e.localAddress),o.proxyAuth&&(o.headers=o.headers||{},o.headers["Proxy-Authorization"]="Basic "+new Buffer(o.proxyAuth).toString("base64")),ie("making CONNECT request");var s=n.request(o);s.useChunkedEncodingByDefault=!1,s.once("response",a),s.once("upgrade",u),s.once("connect",c),s.once("error",l),s.end();function a(f){f.upgrade=!0}function u(f,d,S){process.nextTick(function(){c(f,d,S)})}function c(f,d,S){if(s.removeAllListeners(),d.removeAllListeners(),f.statusCode!==200){ie("tunneling socket could not be established, statusCode=%d",f.statusCode),d.destroy();var E=new Error("tunneling socket could not be established, statusCode="+f.statusCode);E.code="ECONNRESET",e.request.emit("error",E),n.removeSocket(i);return}if(S.length>0){ie("got illegal response body from proxy"),d.destroy();var E=new Error("got illegal response body from proxy");E.code="ECONNRESET",e.request.emit("error",E),n.removeSocket(i);return}return ie("tunneling connection has established"),n.sockets[n.sockets.indexOf(i)]=d,r(d)}function l(f){s.removeAllListeners(),ie(`tunneling socket could not be established, cause=%s
`,f.message,f.stack);var d=new Error("tunneling socket could not be established, cause="+f.message);d.code="ECONNRESET",e.request.emit("error",d),n.removeSocket(i)}};Z.prototype.removeSocket=function(e){var r=this.sockets.indexOf(e);if(r!==-1){this.sockets.splice(r,1);var n=this.requests.shift();n&&this.createSocket(n,function(i){n.request.onSocket(i)})}};function hn(t,e){var r=this;Z.prototype.createSocket.call(r,t,function(n){var i=t.request.getHeader("host"),o=$t({},r.options,{socket:n,servername:i?i.replace(/:.*$/,""):t.host}),s=Gs.connect(0,o);r.sockets[r.sockets.indexOf(n)]=s,e(s)})}function mn(t,e,r){return typeof t=="string"?{host:t,port:e,localAddress:r}:t}function $t(t){for(var e=1,r=arguments.length;e<r;++e){var n=arguments[e];if(typeof n=="object")for(var i=Object.keys(n),o=0,s=i.length;o<s;++o){var a=i[o];n[a]!==void 0&&(t[a]=n[a])}}return t}var ie;process.env.NODE_DEBUG&&/\btunnel\b/.test(process.env.NODE_DEBUG)?ie=function(){var t=Array.prototype.slice.call(arguments);typeof t[0]=="string"?t[0]="TUNNEL: "+t[0]:t.unshift("TUNNEL:"),console.error.apply(console,t)}:ie=function(){};ge.debug=ie});var gn=w((Nl,_n)=>{_n.exports=pn()});var qt=w(O=>{"use strict";var Ks=O&&O.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Xs=O&&O.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),nt=O&&O.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.hasOwnProperty.call(t,r)&&Ks(e,t,r);return Xs(e,t),e},D=O&&O.__awaiter||function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(l){try{c(n.next(l))}catch(f){s(f)}}function u(l){try{c(n.throw(l))}catch(f){s(f)}}function c(l){l.done?o(l.value):i(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})};Object.defineProperty(O,"__esModule",{value:!0});O.HttpClient=O.isHttps=O.HttpClientResponse=O.HttpClientError=O.getProxyUrl=O.MediaTypes=O.Headers=O.HttpCodes=void 0;var Ze=nt(require("http")),Bt=nt(require("https")),yn=nt(fn()),et=nt(gn()),Q;(function(t){t[t.OK=200]="OK",t[t.MultipleChoices=300]="MultipleChoices",t[t.MovedPermanently=301]="MovedPermanently",t[t.ResourceMoved=302]="ResourceMoved",t[t.SeeOther=303]="SeeOther",t[t.NotModified=304]="NotModified",t[t.UseProxy=305]="UseProxy",t[t.SwitchProxy=306]="SwitchProxy",t[t.TemporaryRedirect=307]="TemporaryRedirect",t[t.PermanentRedirect=308]="PermanentRedirect",t[t.BadRequest=400]="BadRequest",t[t.Unauthorized=401]="Unauthorized",t[t.PaymentRequired=402]="PaymentRequired",t[t.Forbidden=403]="Forbidden",t[t.NotFound=404]="NotFound",t[t.MethodNotAllowed=405]="MethodNotAllowed",t[t.NotAcceptable=406]="NotAcceptable",t[t.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",t[t.RequestTimeout=408]="RequestTimeout",t[t.Conflict=409]="Conflict",t[t.Gone=410]="Gone",t[t.TooManyRequests=429]="TooManyRequests",t[t.InternalServerError=500]="InternalServerError",t[t.NotImplemented=501]="NotImplemented",t[t.BadGateway=502]="BadGateway",t[t.ServiceUnavailable=503]="ServiceUnavailable",t[t.GatewayTimeout=504]="GatewayTimeout"})(Q=O.HttpCodes||(O.HttpCodes={}));var M;(function(t){t.Accept="accept",t.ContentType="content-type"})(M=O.Headers||(O.Headers={}));var oe;(function(t){t.ApplicationJson="application/json"})(oe=O.MediaTypes||(O.MediaTypes={}));function Ys(t){let e=yn.getProxyUrl(new URL(t));return e?e.href:""}O.getProxyUrl=Ys;var Zs=[Q.MovedPermanently,Q.ResourceMoved,Q.SeeOther,Q.TemporaryRedirect,Q.PermanentRedirect],ea=[Q.BadGateway,Q.ServiceUnavailable,Q.GatewayTimeout],ta=["OPTIONS","GET","DELETE","HEAD"],ra=10,na=5,ye=class extends Error{constructor(e,r){super(e),this.name="HttpClientError",this.statusCode=r,Object.setPrototypeOf(this,ye.prototype)}};O.HttpClientError=ye;var rt=class{constructor(e){this.message=e}readBody(){return D(this,void 0,void 0,function*(){return new Promise(e=>D(this,void 0,void 0,function*(){let r=Buffer.alloc(0);this.message.on("data",n=>{r=Buffer.concat([r,n])}),this.message.on("end",()=>{e(r.toString())})}))})}};O.HttpClientResponse=rt;function ia(t){return new URL(t).protocol==="https:"}O.isHttps=ia;var Lt=class{constructor(e,r,n){this._ignoreSslError=!1,this._allowRedirects=!0,this._allowRedirectDowngrade=!1,this._maxRedirects=50,this._allowRetries=!1,this._maxRetries=1,this._keepAlive=!1,this._disposed=!1,this.userAgent=e,this.handlers=r||[],this.requestOptions=n,n&&(n.ignoreSslError!=null&&(this._ignoreSslError=n.ignoreSslError),this._socketTimeout=n.socketTimeout,n.allowRedirects!=null&&(this._allowRedirects=n.allowRedirects),n.allowRedirectDowngrade!=null&&(this._allowRedirectDowngrade=n.allowRedirectDowngrade),n.maxRedirects!=null&&(this._maxRedirects=Math.max(n.maxRedirects,0)),n.keepAlive!=null&&(this._keepAlive=n.keepAlive),n.allowRetries!=null&&(this._allowRetries=n.allowRetries),n.maxRetries!=null&&(this._maxRetries=n.maxRetries))}options(e,r){return D(this,void 0,void 0,function*(){return this.request("OPTIONS",e,null,r||{})})}get(e,r){return D(this,void 0,void 0,function*(){return this.request("GET",e,null,r||{})})}del(e,r){return D(this,void 0,void 0,function*(){return this.request("DELETE",e,null,r||{})})}post(e,r,n){return D(this,void 0,void 0,function*(){return this.request("POST",e,r,n||{})})}patch(e,r,n){return D(this,void 0,void 0,function*(){return this.request("PATCH",e,r,n||{})})}put(e,r,n){return D(this,void 0,void 0,function*(){return this.request("PUT",e,r,n||{})})}head(e,r){return D(this,void 0,void 0,function*(){return this.request("HEAD",e,null,r||{})})}sendStream(e,r,n,i){return D(this,void 0,void 0,function*(){return this.request(e,r,n,i)})}getJson(e,r={}){return D(this,void 0,void 0,function*(){r[M.Accept]=this._getExistingOrDefaultHeader(r,M.Accept,oe.ApplicationJson);let n=yield this.get(e,r);return this._processResponse(n,this.requestOptions)})}postJson(e,r,n={}){return D(this,void 0,void 0,function*(){let i=JSON.stringify(r,null,2);n[M.Accept]=this._getExistingOrDefaultHeader(n,M.Accept,oe.ApplicationJson),n[M.ContentType]=this._getExistingOrDefaultHeader(n,M.ContentType,oe.ApplicationJson);let o=yield this.post(e,i,n);return this._processResponse(o,this.requestOptions)})}putJson(e,r,n={}){return D(this,void 0,void 0,function*(){let i=JSON.stringify(r,null,2);n[M.Accept]=this._getExistingOrDefaultHeader(n,M.Accept,oe.ApplicationJson),n[M.ContentType]=this._getExistingOrDefaultHeader(n,M.ContentType,oe.ApplicationJson);let o=yield this.put(e,i,n);return this._processResponse(o,this.requestOptions)})}patchJson(e,r,n={}){return D(this,void 0,void 0,function*(){let i=JSON.stringify(r,null,2);n[M.Accept]=this._getExistingOrDefaultHeader(n,M.Accept,oe.ApplicationJson),n[M.ContentType]=this._getExistingOrDefaultHeader(n,M.ContentType,oe.ApplicationJson);let o=yield this.patch(e,i,n);return this._processResponse(o,this.requestOptions)})}request(e,r,n,i){return D(this,void 0,void 0,function*(){if(this._disposed)throw new Error("Client has already been disposed.");let o=new URL(r),s=this._prepareRequest(e,o,i),a=this._allowRetries&&ta.includes(e)?this._maxRetries+1:1,u=0,c;do{if(c=yield this.requestRaw(s,n),c&&c.message&&c.message.statusCode===Q.Unauthorized){let f;for(let d of this.handlers)if(d.canHandleAuthentication(c)){f=d;break}return f?f.handleAuthentication(this,s,n):c}let l=this._maxRedirects;for(;c.message.statusCode&&Zs.includes(c.message.statusCode)&&this._allowRedirects&&l>0;){let f=c.message.headers.location;if(!f)break;let d=new URL(f);if(o.protocol==="https:"&&o.protocol!==d.protocol&&!this._allowRedirectDowngrade)throw new Error("Redirect from HTTPS to HTTP protocol. This downgrade is not allowed for security reasons. If you want to allow this behavior, set the allowRedirectDowngrade option to true.");if(yield c.readBody(),d.hostname!==o.hostname)for(let S in i)S.toLowerCase()==="authorization"&&delete i[S];s=this._prepareRequest(e,d,i),c=yield this.requestRaw(s,n),l--}if(!c.message.statusCode||!ea.includes(c.message.statusCode))return c;u+=1,u<a&&(yield c.readBody(),yield this._performExponentialBackoff(u))}while(u<a);return c})}dispose(){this._agent&&this._agent.destroy(),this._disposed=!0}requestRaw(e,r){return D(this,void 0,void 0,function*(){return new Promise((n,i)=>{function o(s,a){s?i(s):a?n(a):i(new Error("Unknown error"))}this.requestRawWithCallback(e,r,o)})})}requestRawWithCallback(e,r,n){typeof r=="string"&&(e.options.headers||(e.options.headers={}),e.options.headers["Content-Length"]=Buffer.byteLength(r,"utf8"));let i=!1;function o(u,c){i||(i=!0,n(u,c))}let s=e.httpModule.request(e.options,u=>{let c=new rt(u);o(void 0,c)}),a;s.on("socket",u=>{a=u}),s.setTimeout(this._socketTimeout||3*6e4,()=>{a&&a.end(),o(new Error(`Request timeout: ${e.options.path}`))}),s.on("error",function(u){o(u)}),r&&typeof r=="string"&&s.write(r,"utf8"),r&&typeof r!="string"?(r.on("close",function(){s.end()}),r.pipe(s)):s.end()}getAgent(e){let r=new URL(e);return this._getAgent(r)}_prepareRequest(e,r,n){let i={};i.parsedUrl=r;let o=i.parsedUrl.protocol==="https:";i.httpModule=o?Bt:Ze;let s=o?443:80;if(i.options={},i.options.host=i.parsedUrl.hostname,i.options.port=i.parsedUrl.port?parseInt(i.parsedUrl.port):s,i.options.path=(i.parsedUrl.pathname||"")+(i.parsedUrl.search||""),i.options.method=e,i.options.headers=this._mergeHeaders(n),this.userAgent!=null&&(i.options.headers["user-agent"]=this.userAgent),i.options.agent=this._getAgent(i.parsedUrl),this.handlers)for(let a of this.handlers)a.prepareRequest(i.options);return i}_mergeHeaders(e){return this.requestOptions&&this.requestOptions.headers?Object.assign({},tt(this.requestOptions.headers),tt(e||{})):tt(e||{})}_getExistingOrDefaultHeader(e,r,n){let i;return this.requestOptions&&this.requestOptions.headers&&(i=tt(this.requestOptions.headers)[r]),e[r]||i||n}_getAgent(e){let r,n=yn.getProxyUrl(e),i=n&&n.hostname;if(this._keepAlive&&i&&(r=this._proxyAgent),this._keepAlive&&!i&&(r=this._agent),r)return r;let o=e.protocol==="https:",s=100;if(this.requestOptions&&(s=this.requestOptions.maxSockets||Ze.globalAgent.maxSockets),n&&n.hostname){let a={maxSockets:s,keepAlive:this._keepAlive,proxy:Object.assign(Object.assign({},(n.username||n.password)&&{proxyAuth:`${n.username}:${n.password}`}),{host:n.hostname,port:n.port})},u,c=n.protocol==="https:";o?u=c?et.httpsOverHttps:et.httpsOverHttp:u=c?et.httpOverHttps:et.httpOverHttp,r=u(a),this._proxyAgent=r}if(this._keepAlive&&!r){let a={keepAlive:this._keepAlive,maxSockets:s};r=o?new Bt.Agent(a):new Ze.Agent(a),this._agent=r}return r||(r=o?Bt.globalAgent:Ze.globalAgent),o&&this._ignoreSslError&&(r.options=Object.assign(r.options||{},{rejectUnauthorized:!1})),r}_performExponentialBackoff(e){return D(this,void 0,void 0,function*(){e=Math.min(ra,e);let r=na*Math.pow(2,e);return new Promise(n=>setTimeout(()=>n(),r))})}_processResponse(e,r){return D(this,void 0,void 0,function*(){return new Promise((n,i)=>D(this,void 0,void 0,function*(){let o=e.message.statusCode||0,s={statusCode:o,result:null,headers:{}};o===Q.NotFound&&n(s);function a(l,f){if(typeof f=="string"){let d=new Date(f);if(!isNaN(d.valueOf()))return d}return f}let u,c;try{c=yield e.readBody(),c&&c.length>0&&(r&&r.deserializeDates?u=JSON.parse(c,a):u=JSON.parse(c),s.result=u),s.headers=e.message.headers}catch{}if(o>299){let l;u&&u.message?l=u.message:c&&c.length>0?l=c:l=`Failed request: (${o})`;let f=new ye(l,o);f.result=s.result,i(f)}else n(s)}))})}};O.HttpClient=Lt;var tt=t=>Object.keys(t).reduce((e,r)=>(e[r.toLowerCase()]=t[r],e),{})});var wn=w(K=>{"use strict";var Ut=K&&K.__awaiter||function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(l){try{c(n.next(l))}catch(f){s(f)}}function u(l){try{c(n.throw(l))}catch(f){s(f)}}function c(l){l.done?o(l.value):i(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})};Object.defineProperty(K,"__esModule",{value:!0});K.PersonalAccessTokenCredentialHandler=K.BearerCredentialHandler=K.BasicCredentialHandler=void 0;var jt=class{constructor(e,r){this.username=e,this.password=r}prepareRequest(e){if(!e.headers)throw Error("The request has no headers");e.headers.Authorization=`Basic ${Buffer.from(`${this.username}:${this.password}`).toString("base64")}`}canHandleAuthentication(){return!1}handleAuthentication(){return Ut(this,void 0,void 0,function*(){throw new Error("not implemented")})}};K.BasicCredentialHandler=jt;var Mt=class{constructor(e){this.token=e}prepareRequest(e){if(!e.headers)throw Error("The request has no headers");e.headers.Authorization=`Bearer ${this.token}`}canHandleAuthentication(){return!1}handleAuthentication(){return Ut(this,void 0,void 0,function*(){throw new Error("not implemented")})}};K.BearerCredentialHandler=Mt;var kt=class{constructor(e){this.token=e}prepareRequest(e){if(!e.headers)throw Error("The request has no headers");e.headers.Authorization=`Basic ${Buffer.from(`PAT:${this.token}`).toString("base64")}`}canHandleAuthentication(){return!1}handleAuthentication(){return Ut(this,void 0,void 0,function*(){throw new Error("not implemented")})}};K.PersonalAccessTokenCredentialHandler=kt});var Sn=w(we=>{"use strict";var bn=we&&we.__awaiter||function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(l){try{c(n.next(l))}catch(f){s(f)}}function u(l){try{c(n.throw(l))}catch(f){s(f)}}function c(l){l.done?o(l.value):i(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})};Object.defineProperty(we,"__esModule",{value:!0});we.OidcClient=void 0;var oa=qt(),sa=wn(),vn=Le(),se=class{static createHttpClient(e=!0,r=10){let n={allowRetries:e,maxRetries:r};return new oa.HttpClient("actions/oidc-client",[new sa.BearerCredentialHandler(se.getRequestToken())],n)}static getRequestToken(){let e=process.env.ACTIONS_ID_TOKEN_REQUEST_TOKEN;if(!e)throw new Error("Unable to get ACTIONS_ID_TOKEN_REQUEST_TOKEN env variable");return e}static getIDTokenUrl(){let e=process.env.ACTIONS_ID_TOKEN_REQUEST_URL;if(!e)throw new Error("Unable to get ACTIONS_ID_TOKEN_REQUEST_URL env variable");return e}static getCall(e){var r;return bn(this,void 0,void 0,function*(){let o=(r=(yield se.createHttpClient().getJson(e).catch(s=>{throw new Error(`Failed to get ID Token. 
 
        Error Code : ${s.statusCode}
 
        Error Message: ${s.result.message}`)})).result)===null||r===void 0?void 0:r.value;if(!o)throw new Error("Response json body do not have ID Token field");return o})}static getIDToken(e){return bn(this,void 0,void 0,function*(){try{let r=se.getIDTokenUrl();if(e){let i=encodeURIComponent(e);r=`${r}&audience=${i}`}vn.debug(`ID token url is ${r}`);let n=yield se.getCall(r);return vn.setSecret(n),n}catch(r){throw new Error(`Error message: ${r.message}`)}})}};we.OidcClient=se});var Jt=w(U=>{"use strict";var Ft=U&&U.__awaiter||function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(l){try{c(n.next(l))}catch(f){s(f)}}function u(l){try{c(n.throw(l))}catch(f){s(f)}}function c(l){l.done?o(l.value):i(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})};Object.defineProperty(U,"__esModule",{value:!0});U.summary=U.markdownSummary=U.SUMMARY_DOCS_URL=U.SUMMARY_ENV_VAR=void 0;var aa=require("os"),Gt=require("fs"),{access:ca,appendFile:ua,writeFile:la}=Gt.promises;U.SUMMARY_ENV_VAR="GITHUB_STEP_SUMMARY";U.SUMMARY_DOCS_URL="https://docs.github.com/actions/using-workflows/workflow-commands-for-github-actions#adding-a-job-summary";var Vt=class{constructor(){this._buffer=""}filePath(){return Ft(this,void 0,void 0,function*(){if(this._filePath)return this._filePath;let e=process.env[U.SUMMARY_ENV_VAR];if(!e)throw new Error(`Unable to find environment variable for $${U.SUMMARY_ENV_VAR}. Check if your runtime environment supports job summaries.`);try{yield ca(e,Gt.constants.R_OK|Gt.constants.W_OK)}catch{throw new Error(`Unable to access summary file: '${e}'. Check if the file has correct read/write permissions.`)}return this._filePath=e,this._filePath})}wrap(e,r,n={}){let i=Object.entries(n).map(([o,s])=>` ${o}="${s}"`).join("");return r?`<${e}${i}>${r}</${e}>`:`<${e}${i}>`}write(e){return Ft(this,void 0,void 0,function*(){let r=!!(e!=null&&e.overwrite),n=yield this.filePath();return yield(r?la:ua)(n,this._buffer,{encoding:"utf8"}),this.emptyBuffer()})}clear(){return Ft(this,void 0,void 0,function*(){return this.emptyBuffer().write({overwrite:!0})})}stringify(){return this._buffer}isEmptyBuffer(){return this._buffer.length===0}emptyBuffer(){return this._buffer="",this}addRaw(e,r=!1){return this._buffer+=e,r?this.addEOL():this}addEOL(){return this.addRaw(aa.EOL)}addCodeBlock(e,r){let n=Object.assign({},r&&{lang:r}),i=this.wrap("pre",this.wrap("code",e),n);return this.addRaw(i).addEOL()}addList(e,r=!1){let n=r?"ol":"ul",i=e.map(s=>this.wrap("li",s)).join(""),o=this.wrap(n,i);return this.addRaw(o).addEOL()}addTable(e){let r=e.map(i=>{let o=i.map(s=>{if(typeof s=="string")return this.wrap("td",s);let{header:a,data:u,colspan:c,rowspan:l}=s,f=a?"th":"td",d=Object.assign(Object.assign({},c&&{colspan:c}),l&&{rowspan:l});return this.wrap(f,u,d)}).join("");return this.wrap("tr",o)}).join(""),n=this.wrap("table",r);return this.addRaw(n).addEOL()}addDetails(e,r){let n=this.wrap("details",this.wrap("summary",e)+r);return this.addRaw(n).addEOL()}addImage(e,r,n){let{width:i,height:o}=n||{},s=Object.assign(Object.assign({},i&&{width:i}),o&&{height:o}),a=this.wrap("img",null,Object.assign({src:e,alt:r},s));return this.addRaw(a).addEOL()}addHeading(e,r){let n=`h${r}`,i=["h1","h2","h3","h4","h5","h6"].includes(n)?n:"h1",o=this.wrap(i,e);return this.addRaw(o).addEOL()}addSeparator(){let e=this.wrap("hr",null);return this.addRaw(e).addEOL()}addBreak(){let e=this.wrap("br",null);return this.addRaw(e).addEOL()}addQuote(e,r){let n=Object.assign({},r&&{cite:r}),i=this.wrap("blockquote",e,n);return this.addRaw(i).addEOL()}addLink(e,r){let n=this.wrap("a",e,{href:r});return this.addRaw(n).addEOL()}},xn=new Vt;U.markdownSummary=xn;U.summary=xn});var On=w(F=>{"use strict";var fa=F&&F.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),da=F&&F.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),ha=F&&F.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.hasOwnProperty.call(t,r)&&fa(e,t,r);return da(e,t),e};Object.defineProperty(F,"__esModule",{value:!0});F.toPlatformPath=F.toWin32Path=F.toPosixPath=void 0;var ma=ha(require("path"));function pa(t){return t.replace(/[\\]/g,"/")}F.toPosixPath=pa;function _a(t){return t.replace(/[/]/g,"\\")}F.toWin32Path=_a;function ga(t){return t.replace(/[/\\]/g,ma.sep)}F.toPlatformPath=ga});var Le=w(m=>{"use strict";var ya=m&&m.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),wa=m&&m.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),En=m&&m.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.hasOwnProperty.call(t,r)&&ya(e,t,r);return wa(e,t),e},In=m&&m.__awaiter||function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(l){try{c(n.next(l))}catch(f){s(f)}}function u(l){try{c(n.throw(l))}catch(f){s(f)}}function c(l){l.done?o(l.value):i(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})};Object.defineProperty(m,"__esModule",{value:!0});m.getIDToken=m.getState=m.saveState=m.group=m.endGroup=m.startGroup=m.info=m.notice=m.warning=m.error=m.debug=m.isDebug=m.setFailed=m.setCommandEcho=m.setOutput=m.getBooleanInput=m.getMultilineInput=m.getInput=m.addPath=m.setSecret=m.exportVariable=m.ExitCode=void 0;var H=$r(),le=un(),be=He(),Tn=En(require("os")),ba=En(require("path")),va=Sn(),Cn;(function(t){t[t.Success=0]="Success",t[t.Failure=1]="Failure"})(Cn=m.ExitCode||(m.ExitCode={}));function Sa(t,e){let r=be.toCommandValue(e);if(process.env[t]=r,process.env.GITHUB_ENV||"")return le.issueFileCommand("ENV",le.prepareKeyValueMessage(t,e));H.issueCommand("set-env",{name:t},r)}m.exportVariable=Sa;function xa(t){H.issueCommand("add-mask",{},t)}m.setSecret=xa;function Oa(t){process.env.GITHUB_PATH||""?le.issueFileCommand("PATH",t):H.issueCommand("add-path",{},t),process.env.PATH=`${t}${ba.delimiter}${process.env.PATH}`}m.addPath=Oa;function zt(t,e){let r=process.env[`INPUT_${t.replace(/ /g,"_").toUpperCase()}`]||"";if(e&&e.required&&!r)throw new Error(`Input required and not supplied: ${t}`);return e&&e.trimWhitespace===!1?r:r.trim()}m.getInput=zt;function Ea(t,e){let r=zt(t,e).split(`
`).filter(n=>n!=="");return e&&e.trimWhitespace===!1?r:r.map(n=>n.trim())}m.getMultilineInput=Ea;function Ia(t,e){let r=["true","True","TRUE"],n=["false","False","FALSE"],i=zt(t,e);if(r.includes(i))return!0;if(n.includes(i))return!1;throw new TypeError(`Input does not meet YAML 1.2 "Core Schema" specification: ${t}
Support boolean input list: \`true | True | TRUE | false | False | FALSE\``)}m.getBooleanInput=Ia;function Ta(t,e){if(process.env.GITHUB_OUTPUT||"")return le.issueFileCommand("OUTPUT",le.prepareKeyValueMessage(t,e));process.stdout.write(Tn.EOL),H.issueCommand("set-output",{name:t},be.toCommandValue(e))}m.setOutput=Ta;function Ca(t){H.issue("echo",t?"on":"off")}m.setCommandEcho=Ca;function Ra(t){process.exitCode=Cn.Failure,Rn(t)}m.setFailed=Ra;function Pa(){return process.env.RUNNER_DEBUG==="1"}m.isDebug=Pa;function Aa(t){H.issueCommand("debug",{},t)}m.debug=Aa;function Rn(t,e={}){H.issueCommand("error",be.toCommandProperties(e),t instanceof Error?t.toString():t)}m.error=Rn;function Na(t,e={}){H.issueCommand("warning",be.toCommandProperties(e),t instanceof Error?t.toString():t)}m.warning=Na;function Da(t,e={}){H.issueCommand("notice",be.toCommandProperties(e),t instanceof Error?t.toString():t)}m.notice=Da;function $a(t){process.stdout.write(t+Tn.EOL)}m.info=$a;function Pn(t){H.issue("group",t)}m.startGroup=Pn;function An(){H.issue("endgroup")}m.endGroup=An;function Ba(t,e){return In(this,void 0,void 0,function*(){Pn(t);let r;try{r=yield e()}finally{An()}return r})}m.group=Ba;function La(t,e){if(process.env.GITHUB_STATE||"")return le.issueFileCommand("STATE",le.prepareKeyValueMessage(t,e));H.issueCommand("save-state",{name:t},be.toCommandValue(e))}m.saveState=La;function qa(t){return process.env[`STATE_${t}`]||""}m.getState=qa;function ja(t){return In(this,void 0,void 0,function*(){return yield va.OidcClient.getIDToken(t)})}m.getIDToken=ja;var Ma=Jt();Object.defineProperty(m,"summary",{enumerable:!0,get:function(){return Ma.summary}});var ka=Jt();Object.defineProperty(m,"markdownSummary",{enumerable:!0,get:function(){return ka.markdownSummary}});var Wt=On();Object.defineProperty(m,"toPosixPath",{enumerable:!0,get:function(){return Wt.toPosixPath}});Object.defineProperty(m,"toWin32Path",{enumerable:!0,get:function(){return Wt.toWin32Path}});Object.defineProperty(m,"toPlatformPath",{enumerable:!0,get:function(){return Wt.toPlatformPath}})});var er=w(h=>{"use strict";var Qa=h&&h.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Ka=h&&h.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Gn=h&&h.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.hasOwnProperty.call(t,r)&&Qa(e,t,r);return Ka(e,t),e},Zt=h&&h.__awaiter||function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(l){try{c(n.next(l))}catch(f){s(f)}}function u(l){try{c(n.throw(l))}catch(f){s(f)}}function c(l){l.done?o(l.value):i(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},G;Object.defineProperty(h,"__esModule",{value:!0});h.getCmdPath=h.tryGetExecutablePath=h.isRooted=h.isDirectory=h.exists=h.READONLY=h.UV_FS_O_EXLOCK=h.IS_WINDOWS=h.unlink=h.symlink=h.stat=h.rmdir=h.rm=h.rename=h.readlink=h.readdir=h.open=h.mkdir=h.lstat=h.copyFile=h.chmod=void 0;var Vn=Gn(require("fs")),st=Gn(require("path"));G=Vn.promises,h.chmod=G.chmod,h.copyFile=G.copyFile,h.lstat=G.lstat,h.mkdir=G.mkdir,h.open=G.open,h.readdir=G.readdir,h.readlink=G.readlink,h.rename=G.rename,h.rm=G.rm,h.rmdir=G.rmdir,h.stat=G.stat,h.symlink=G.symlink,h.unlink=G.unlink;h.IS_WINDOWS=process.platform==="win32";h.UV_FS_O_EXLOCK=268435456;h.READONLY=Vn.constants.O_RDONLY;function Xa(t){return Zt(this,void 0,void 0,function*(){try{yield h.stat(t)}catch(e){if(e.code==="ENOENT")return!1;throw e}return!0})}h.exists=Xa;function Ya(t,e=!1){return Zt(this,void 0,void 0,function*(){return(e?yield h.stat(t):yield h.lstat(t)).isDirectory()})}h.isDirectory=Ya;function Za(t){if(t=tc(t),!t)throw new Error('isRooted() parameter "p" cannot be empty');return h.IS_WINDOWS?t.startsWith("\\")||/^[A-Z]:/i.test(t):t.startsWith("/")}h.isRooted=Za;function ec(t,e){return Zt(this,void 0,void 0,function*(){let r;try{r=yield h.stat(t)}catch(i){i.code!=="ENOENT"&&console.log(`Unexpected error attempting to determine if executable file exists '${t}': ${i}`)}if(r&&r.isFile()){if(h.IS_WINDOWS){let i=st.extname(t).toUpperCase();if(e.some(o=>o.toUpperCase()===i))return t}else if(Fn(r))return t}let n=t;for(let i of e){t=n+i,r=void 0;try{r=yield h.stat(t)}catch(o){o.code!=="ENOENT"&&console.log(`Unexpected error attempting to determine if executable file exists '${t}': ${o}`)}if(r&&r.isFile()){if(h.IS_WINDOWS){try{let o=st.dirname(t),s=st.basename(t).toUpperCase();for(let a of yield h.readdir(o))if(s===a.toUpperCase()){t=st.join(o,a);break}}catch(o){console.log(`Unexpected error attempting to determine the actual case of the file '${t}': ${o}`)}return t}else if(Fn(r))return t}}return""})}h.tryGetExecutablePath=ec;function tc(t){return t=t||"",h.IS_WINDOWS?(t=t.replace(/\//g,"\\"),t.replace(/\\\\+/g,"\\")):t.replace(/\/\/+/g,"/")}function Fn(t){return(t.mode&1)>0||(t.mode&8)>0&&t.gid===process.getgid()||(t.mode&64)>0&&t.uid===process.getuid()}function rc(){var t;return(t=process.env.COMSPEC)!==null&&t!==void 0?t:"cmd.exe"}h.getCmdPath=rc});var rr=w(C=>{"use strict";var nc=C&&C.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),ic=C&&C.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Jn=C&&C.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.hasOwnProperty.call(t,r)&&nc(e,t,r);return ic(e,t),e},ae=C&&C.__awaiter||function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(l){try{c(n.next(l))}catch(f){s(f)}}function u(l){try{c(n.throw(l))}catch(f){s(f)}}function c(l){l.done?o(l.value):i(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})};Object.defineProperty(C,"__esModule",{value:!0});C.findInPath=C.which=C.mkdirP=C.rmRF=C.mv=C.cp=void 0;var oc=require("assert"),X=Jn(require("path")),v=Jn(er());function sc(t,e,r={}){return ae(this,void 0,void 0,function*(){let{force:n,recursive:i,copySourceDirectory:o}=cc(r),s=(yield v.exists(e))?yield v.stat(e):null;if(s&&s.isFile()&&!n)return;let a=s&&s.isDirectory()&&o?X.join(e,X.basename(t)):e;if(!(yield v.exists(t)))throw new Error(`no such file or directory: ${t}`);if((yield v.stat(t)).isDirectory())if(i)yield Qn(t,a,0,n);else throw new Error(`Failed to copy. ${t} is a directory, but tried to copy without recursive flag.`);else{if(X.relative(t,a)==="")throw new Error(`'${a}' and '${t}' are the same file`);yield Kn(t,a,n)}})}C.cp=sc;function ac(t,e,r={}){return ae(this,void 0,void 0,function*(){if(yield v.exists(e)){let n=!0;if((yield v.isDirectory(e))&&(e=X.join(e,X.basename(t)),n=yield v.exists(e)),n)if(r.force==null||r.force)yield zn(e);else throw new Error("Destination already exists")}yield tr(X.dirname(e)),yield v.rename(t,e)})}C.mv=ac;function zn(t){return ae(this,void 0,void 0,function*(){if(v.IS_WINDOWS&&/[*"<>|]/.test(t))throw new Error('File path must not contain `*`, `"`, `<`, `>` or `|` on Windows');try{yield v.rm(t,{force:!0,maxRetries:3,recursive:!0,retryDelay:300})}catch(e){throw new Error(`File was unable to be removed ${e}`)}})}C.rmRF=zn;function tr(t){return ae(this,void 0,void 0,function*(){oc.ok(t,"a path argument must be provided"),yield v.mkdir(t,{recursive:!0})})}C.mkdirP=tr;function Wn(t,e){return ae(this,void 0,void 0,function*(){if(!t)throw new Error("parameter 'tool' is required");if(e){let n=yield Wn(t,!1);if(!n)throw v.IS_WINDOWS?new Error(`Unable to locate executable file: ${t}. Please verify either the file path exists or the file can be found within a directory specified by the PATH environment variable. Also verify the file has a valid extension for an executable file.`):new Error(`Unable to locate executable file: ${t}. Please verify either the file path exists or the file can be found within a directory specified by the PATH environment variable. Also check the file mode to verify the file is executable.`);return n}let r=yield Hn(t);return r&&r.length>0?r[0]:""})}C.which=Wn;function Hn(t){return ae(this,void 0,void 0,function*(){if(!t)throw new Error("parameter 'tool' is required");let e=[];if(v.IS_WINDOWS&&process.env.PATHEXT)for(let i of process.env.PATHEXT.split(X.delimiter))i&&e.push(i);if(v.isRooted(t)){let i=yield v.tryGetExecutablePath(t,e);return i?[i]:[]}if(t.includes(X.sep))return[];let r=[];if(process.env.PATH)for(let i of process.env.PATH.split(X.delimiter))i&&r.push(i);let n=[];for(let i of r){let o=yield v.tryGetExecutablePath(X.join(i,t),e);o&&n.push(o)}return n})}C.findInPath=Hn;function cc(t){let e=t.force==null?!0:t.force,r=!!t.recursive,n=t.copySourceDirectory==null?!0:!!t.copySourceDirectory;return{force:e,recursive:r,copySourceDirectory:n}}function Qn(t,e,r,n){return ae(this,void 0,void 0,function*(){if(r>=255)return;r++,yield tr(e);let i=yield v.readdir(t);for(let o of i){let s=`${t}/${o}`,a=`${e}/${o}`;(yield v.lstat(s)).isDirectory()?yield Qn(s,a,r,n):yield Kn(s,a,n)}yield v.chmod(e,(yield v.stat(t)).mode)})}function Kn(t,e,r){return ae(this,void 0,void 0,function*(){if((yield v.lstat(t)).isSymbolicLink()){try{yield v.lstat(e),yield v.unlink(e)}catch(i){i.code==="EPERM"&&(yield v.chmod(e,"0666"),yield v.unlink(e))}let n=yield v.readlink(t);yield v.symlink(n,e,v.IS_WINDOWS?"junction":null)}else(!(yield v.exists(e))||r)&&(yield v.copyFile(t,e))})}});var ei=w(V=>{"use strict";var uc=V&&V.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),lc=V&&V.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),xe=V&&V.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.hasOwnProperty.call(t,r)&&uc(e,t,r);return lc(e,t),e},Xn=V&&V.__awaiter||function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(l){try{c(n.next(l))}catch(f){s(f)}}function u(l){try{c(n.throw(l))}catch(f){s(f)}}function c(l){l.done?o(l.value):i(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})};Object.defineProperty(V,"__esModule",{value:!0});V.argStringToArray=V.ToolRunner=void 0;var at=xe(require("os")),Zn=xe(require("events")),fc=xe(require("child_process")),dc=xe(require("path")),hc=xe(rr()),Yn=xe(er()),mc=require("timers"),ct=process.platform==="win32",nr=class extends Zn.EventEmitter{constructor(e,r,n){if(super(),!e)throw new Error("Parameter 'toolPath' cannot be null or empty.");this.toolPath=e,this.args=r||[],this.options=n||{}}_debug(e){this.options.listeners&&this.options.listeners.debug&&this.options.listeners.debug(e)}_getCommandString(e,r){let n=this._getSpawnFileName(),i=this._getSpawnArgs(e),o=r?"":"[command]";if(ct)if(this._isCmdFile()){o+=n;for(let s of i)o+=` ${s}`}else if(e.windowsVerbatimArguments){o+=`"${n}"`;for(let s of i)o+=` ${s}`}else{o+=this._windowsQuoteCmdArg(n);for(let s of i)o+=` ${this._windowsQuoteCmdArg(s)}`}else{o+=n;for(let s of i)o+=` ${s}`}return o}_processLineBuffer(e,r,n){try{let i=r+e.toString(),o=i.indexOf(at.EOL);for(;o>-1;){let s=i.substring(0,o);n(s),i=i.substring(o+at.EOL.length),o=i.indexOf(at.EOL)}return i}catch(i){return this._debug(`error processing line. Failed with error ${i}`),""}}_getSpawnFileName(){return ct&&this._isCmdFile()?process.env.COMSPEC||"cmd.exe":this.toolPath}_getSpawnArgs(e){if(ct&&this._isCmdFile()){let r=`/D /S /C "${this._windowsQuoteCmdArg(this.toolPath)}`;for(let n of this.args)r+=" ",r+=e.windowsVerbatimArguments?n:this._windowsQuoteCmdArg(n);return r+='"',[r]}return this.args}_endsWith(e,r){return e.endsWith(r)}_isCmdFile(){let e=this.toolPath.toUpperCase();return this._endsWith(e,".CMD")||this._endsWith(e,".BAT")}_windowsQuoteCmdArg(e){if(!this._isCmdFile())return this._uvQuoteCmdArg(e);if(!e)return'""';let r=[" ","	","&","(",")","[","]","{","}","^","=",";","!","'","+",",","`","~","|","<",">",'"'],n=!1;for(let s of e)if(r.some(a=>a===s)){n=!0;break}if(!n)return e;let i='"',o=!0;for(let s=e.length;s>0;s--)i+=e[s-1],o&&e[s-1]==="\\"?i+="\\":e[s-1]==='"'?(o=!0,i+='"'):o=!1;return i+='"',i.split("").reverse().join("")}_uvQuoteCmdArg(e){if(!e)return'""';if(!e.includes(" ")&&!e.includes("	")&&!e.includes('"'))return e;if(!e.includes('"')&&!e.includes("\\"))return`"${e}"`;let r='"',n=!0;for(let i=e.length;i>0;i--)r+=e[i-1],n&&e[i-1]==="\\"?r+="\\":e[i-1]==='"'?(n=!0,r+="\\"):n=!1;return r+='"',r.split("").reverse().join("")}_cloneExecOptions(e){e=e||{};let r={cwd:e.cwd||process.cwd(),env:e.env||process.env,silent:e.silent||!1,windowsVerbatimArguments:e.windowsVerbatimArguments||!1,failOnStdErr:e.failOnStdErr||!1,ignoreReturnCode:e.ignoreReturnCode||!1,delay:e.delay||1e4};return r.outStream=e.outStream||process.stdout,r.errStream=e.errStream||process.stderr,r}_getSpawnOptions(e,r){e=e||{};let n={};return n.cwd=e.cwd,n.env=e.env,n.windowsVerbatimArguments=e.windowsVerbatimArguments||this._isCmdFile(),e.windowsVerbatimArguments&&(n.argv0=`"${r}"`),n}exec(){return Xn(this,void 0,void 0,function*(){return!Yn.isRooted(this.toolPath)&&(this.toolPath.includes("/")||ct&&this.toolPath.includes("\\"))&&(this.toolPath=dc.resolve(process.cwd(),this.options.cwd||process.cwd(),this.toolPath)),this.toolPath=yield hc.which(this.toolPath,!0),new Promise((e,r)=>Xn(this,void 0,void 0,function*(){this._debug(`exec tool: ${this.toolPath}`),this._debug("arguments:");for(let c of this.args)this._debug(`   ${c}`);let n=this._cloneExecOptions(this.options);!n.silent&&n.outStream&&n.outStream.write(this._getCommandString(n)+at.EOL);let i=new je(n,this.toolPath);if(i.on("debug",c=>{this._debug(c)}),this.options.cwd&&!(yield Yn.exists(this.options.cwd)))return r(new Error(`The cwd: ${this.options.cwd} does not exist!`));let o=this._getSpawnFileName(),s=fc.spawn(o,this._getSpawnArgs(n),this._getSpawnOptions(this.options,o)),a="";s.stdout&&s.stdout.on("data",c=>{this.options.listeners&&this.options.listeners.stdout&&this.options.listeners.stdout(c),!n.silent&&n.outStream&&n.outStream.write(c),a=this._processLineBuffer(c,a,l=>{this.options.listeners&&this.options.listeners.stdline&&this.options.listeners.stdline(l)})});let u="";if(s.stderr&&s.stderr.on("data",c=>{i.processStderr=!0,this.options.listeners&&this.options.listeners.stderr&&this.options.listeners.stderr(c),!n.silent&&n.errStream&&n.outStream&&(n.failOnStdErr?n.errStream:n.outStream).write(c),u=this._processLineBuffer(c,u,l=>{this.options.listeners&&this.options.listeners.errline&&this.options.listeners.errline(l)})}),s.on("error",c=>{i.processError=c.message,i.processExited=!0,i.processClosed=!0,i.CheckComplete()}),s.on("exit",c=>{i.processExitCode=c,i.processExited=!0,this._debug(`Exit code ${c} received from tool '${this.toolPath}'`),i.CheckComplete()}),s.on("close",c=>{i.processExitCode=c,i.processExited=!0,i.processClosed=!0,this._debug(`STDIO streams have closed for tool '${this.toolPath}'`),i.CheckComplete()}),i.on("done",(c,l)=>{a.length>0&&this.emit("stdline",a),u.length>0&&this.emit("errline",u),s.removeAllListeners(),c?r(c):e(l)}),this.options.input){if(!s.stdin)throw new Error("child process missing stdin");s.stdin.end(this.options.input)}}))})}};V.ToolRunner=nr;function pc(t){let e=[],r=!1,n=!1,i="";function o(s){n&&s!=='"'&&(i+="\\"),i+=s,n=!1}for(let s=0;s<t.length;s++){let a=t.charAt(s);if(a==='"'){n?o(a):r=!r;continue}if(a==="\\"&&n){o(a);continue}if(a==="\\"&&r){n=!0;continue}if(a===" "&&!r){i.length>0&&(e.push(i),i="");continue}o(a)}return i.length>0&&e.push(i.trim()),e}V.argStringToArray=pc;var je=class extends Zn.EventEmitter{constructor(e,r){if(super(),this.processClosed=!1,this.processError="",this.processExitCode=0,this.processExited=!1,this.processStderr=!1,this.delay=1e4,this.done=!1,this.timeout=null,!r)throw new Error("toolPath must not be empty");this.options=e,this.toolPath=r,e.delay&&(this.delay=e.delay)}CheckComplete(){this.done||(this.processClosed?this._setResult():this.processExited&&(this.timeout=mc.setTimeout(je.HandleTimeout,this.delay,this)))}_debug(e){this.emit("debug",e)}_setResult(){let e;this.processExited&&(this.processError?e=new Error(`There was an error when attempting to execute the process '${this.toolPath}'. This may indicate the process failed to start. Error: ${this.processError}`):this.processExitCode!==0&&!this.options.ignoreReturnCode?e=new Error(`The process '${this.toolPath}' failed with exit code ${this.processExitCode}`):this.processStderr&&this.options.failOnStdErr&&(e=new Error(`The process '${this.toolPath}' failed because one or more lines were written to the STDERR stream`))),this.timeout&&(clearTimeout(this.timeout),this.timeout=null),this.done=!0,this.emit("done",e,this.processExitCode)}static HandleTimeout(e){if(!e.done){if(!e.processClosed&&e.processExited){let r=`The STDIO streams did not close within ${e.delay/1e3} seconds of the exit event from process '${e.toolPath}'. This may indicate a child process inherited the STDIO streams and has not yet exited.`;e._debug(r)}e._setResult()}}}});var oi=w(J=>{"use strict";var _c=J&&J.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),gc=J&&J.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),yc=J&&J.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.hasOwnProperty.call(t,r)&&_c(e,t,r);return gc(e,t),e},ni=J&&J.__awaiter||function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(l){try{c(n.next(l))}catch(f){s(f)}}function u(l){try{c(n.throw(l))}catch(f){s(f)}}function c(l){l.done?o(l.value):i(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})};Object.defineProperty(J,"__esModule",{value:!0});J.getExecOutput=J.exec=void 0;var ti=require("string_decoder"),ri=yc(ei());function ii(t,e,r){return ni(this,void 0,void 0,function*(){let n=ri.argStringToArray(t);if(n.length===0)throw new Error("Parameter 'commandLine' cannot be null or empty.");let i=n[0];return e=n.slice(1).concat(e||[]),new ri.ToolRunner(i,e,r).exec()})}J.exec=ii;function wc(t,e,r){var n,i;return ni(this,void 0,void 0,function*(){let o="",s="",a=new ti.StringDecoder("utf8"),u=new ti.StringDecoder("utf8"),c=(n=r==null?void 0:r.listeners)===null||n===void 0?void 0:n.stdout,l=(i=r==null?void 0:r.listeners)===null||i===void 0?void 0:i.stderr,f=_=>{s+=u.write(_),l&&l(_)},d=_=>{o+=a.write(_),c&&c(_)},S=Object.assign(Object.assign({},r==null?void 0:r.listeners),{stdout:d,stderr:f}),E=yield ii(t,e,Object.assign(Object.assign({},r),{listeners:S}));return o+=a.end(),s+=u.end(),{exitCode:E,stdout:o,stderr:s}})}J.getExecOutput=wc});var li=w((uf,ui)=>{ui.exports=ci;ci.sync=vc;var si=require("fs");function bc(t,e){var r=e.pathExt!==void 0?e.pathExt:process.env.PATHEXT;if(!r||(r=r.split(";"),r.indexOf("")!==-1))return!0;for(var n=0;n<r.length;n++){var i=r[n].toLowerCase();if(i&&t.substr(-i.length).toLowerCase()===i)return!0}return!1}function ai(t,e,r){return!t.isSymbolicLink()&&!t.isFile()?!1:bc(e,r)}function ci(t,e,r){si.stat(t,function(n,i){r(n,n?!1:ai(i,t,e))})}function vc(t,e){return ai(si.statSync(t),t,e)}});var pi=w((lf,mi)=>{mi.exports=di;di.sync=Sc;var fi=require("fs");function di(t,e,r){fi.stat(t,function(n,i){r(n,n?!1:hi(i,e))})}function Sc(t,e){return hi(fi.statSync(t),e)}function hi(t,e){return t.isFile()&&xc(t,e)}function xc(t,e){var r=t.mode,n=t.uid,i=t.gid,o=e.uid!==void 0?e.uid:process.getuid&&process.getuid(),s=e.gid!==void 0?e.gid:process.getgid&&process.getgid(),a=parseInt("100",8),u=parseInt("010",8),c=parseInt("001",8),l=a|u,f=r&c||r&u&&i===s||r&a&&n===o||r&l&&o===0;return f}});var gi=w((df,_i)=>{var ff=require("fs"),ut;process.platform==="win32"||global.TESTING_WINDOWS?ut=li():ut=pi();_i.exports=ir;ir.sync=Oc;function ir(t,e,r){if(typeof e=="function"&&(r=e,e={}),!r){if(typeof Promise!="function")throw new TypeError("callback not provided");return new Promise(function(n,i){ir(t,e||{},function(o,s){o?i(o):n(s)})})}ut(t,e||{},function(n,i){n&&(n.code==="EACCES"||e&&e.ignoreErrors)&&(n=null,i=!1),r(n,i)})}function Oc(t,e){try{return ut.sync(t,e||{})}catch(r){if(e&&e.ignoreErrors||r.code==="EACCES")return!1;throw r}}});var Oi=w((hf,xi)=>{var Oe=process.platform==="win32"||process.env.OSTYPE==="cygwin"||process.env.OSTYPE==="msys",yi=require("path"),Ec=Oe?";":":",wi=gi(),bi=t=>Object.assign(new Error(`not found: ${t}`),{code:"ENOENT"}),vi=(t,e)=>{let r=e.colon||Ec,n=t.match(/\//)||Oe&&t.match(/\\/)?[""]:[...Oe?[process.cwd()]:[],...(e.path||process.env.PATH||"").split(r)],i=Oe?e.pathExt||process.env.PATHEXT||".EXE;.CMD;.BAT;.COM":"",o=Oe?i.split(r):[""];return Oe&&t.indexOf(".")!==-1&&o[0]!==""&&o.unshift(""),{pathEnv:n,pathExt:o,pathExtExe:i}},Si=(t,e,r)=>{typeof e=="function"&&(r=e,e={}),e||(e={});let{pathEnv:n,pathExt:i,pathExtExe:o}=vi(t,e),s=[],a=c=>new Promise((l,f)=>{if(c===n.length)return e.all&&s.length?l(s):f(bi(t));let d=n[c],S=/^".*"$/.test(d)?d.slice(1,-1):d,E=yi.join(S,t),_=!S&&/^\.[\\\/]/.test(t)?t.slice(0,2)+E:E;l(u(_,c,0))}),u=(c,l,f)=>new Promise((d,S)=>{if(f===i.length)return d(a(l+1));let E=i[f];wi(c+E,{pathExt:o},(_,L)=>{if(!_&&L)if(e.all)s.push(c+E);else return d(c+E);return d(u(c,l,f+1))})});return r?a(0).then(c=>r(null,c),r):a(0)},Ic=(t,e)=>{e=e||{};let{pathEnv:r,pathExt:n,pathExtExe:i}=vi(t,e),o=[];for(let s=0;s<r.length;s++){let a=r[s],u=/^".*"$/.test(a)?a.slice(1,-1):a,c=yi.join(u,t),l=!u&&/^\.[\\\/]/.test(t)?t.slice(0,2)+c:c;for(let f=0;f<n.length;f++){let d=l+n[f];try{if(wi.sync(d,{pathExt:i}))if(e.all)o.push(d);else return d}catch{}}}if(e.all&&o.length)return o;if(e.nothrow)return null;throw bi(t)};xi.exports=Si;Si.sync=Ic});var Ii=w((mf,or)=>{"use strict";var Ei=(t={})=>{let e=t.env||process.env;return(t.platform||process.platform)!=="win32"?"PATH":Object.keys(e).reverse().find(n=>n.toUpperCase()==="PATH")||"Path"};or.exports=Ei;or.exports.default=Ei});var Pi=w((pf,Ri)=>{"use strict";var Ti=require("path"),Tc=Oi(),Cc=Ii();function Ci(t,e){let r=t.options.env||process.env,n=process.cwd(),i=t.options.cwd!=null,o=i&&process.chdir!==void 0&&!process.chdir.disabled;if(o)try{process.chdir(t.options.cwd)}catch{}let s;try{s=Tc.sync(t.command,{path:r[Cc({env:r})],pathExt:e?Ti.delimiter:void 0})}catch{}finally{o&&process.chdir(n)}return s&&(s=Ti.resolve(i?t.options.cwd:"",s)),s}function Rc(t){return Ci(t)||Ci(t,!0)}Ri.exports=Rc});var Ai=w((_f,ar)=>{"use strict";var sr=/([()\][%!^"`<>&|;, *?])/g;function Pc(t){return t=t.replace(sr,"^$1"),t}function Ac(t,e){return t=`${t}`,t=t.replace(/(\\*)"/g,'$1$1\\"'),t=t.replace(/(\\*)$/,"$1$1"),t=`"${t}"`,t=t.replace(sr,"^$1"),e&&(t=t.replace(sr,"^$1")),t}ar.exports.command=Pc;ar.exports.argument=Ac});var Di=w((gf,Ni)=>{"use strict";Ni.exports=/^#!(.*)/});var Bi=w((yf,$i)=>{"use strict";var Nc=Di();$i.exports=(t="")=>{let e=t.match(Nc);if(!e)return null;let[r,n]=e[0].replace(/#! ?/,"").split(" "),i=r.split("/").pop();return i==="env"?n:n?`${i} ${n}`:i}});var qi=w((wf,Li)=>{"use strict";var cr=require("fs"),Dc=Bi();function $c(t){let r=Buffer.alloc(150),n;try{n=cr.openSync(t,"r"),cr.readSync(n,r,0,150,0),cr.closeSync(n)}catch{}return Dc(r.toString())}Li.exports=$c});var Ui=w((bf,ki)=>{"use strict";var Bc=require("path"),ji=Pi(),Mi=Ai(),Lc=qi(),qc=process.platform==="win32",jc=/\.(?:com|exe)$/i,Mc=/node_modules[\\/].bin[\\/][^\\/]+\.cmd$/i;function kc(t){t.file=ji(t);let e=t.file&&Lc(t.file);return e?(t.args.unshift(t.file),t.command=e,ji(t)):t.file}function Uc(t){if(!qc)return t;let e=kc(t),r=!jc.test(e);if(t.options.forceShell||r){let n=Mc.test(e);t.command=Bc.normalize(t.command),t.command=Mi.command(t.command),t.args=t.args.map(o=>Mi.argument(o,n));let i=[t.command].concat(t.args).join(" ");t.args=["/d","/s","/c",`"${i}"`],t.command=process.env.comspec||"cmd.exe",t.options.windowsVerbatimArguments=!0}return t}function Fc(t,e,r){e&&!Array.isArray(e)&&(r=e,e=null),e=e?e.slice(0):[],r=Object.assign({},r);let n={command:t,args:e,options:r,file:void 0,original:{command:t,args:e}};return r.shell?n:Uc(n)}ki.exports=Fc});var Vi=w((vf,Gi)=>{"use strict";var ur=process.platform==="win32";function lr(t,e){return Object.assign(new Error(`${e} ${t.command} ENOENT`),{code:"ENOENT",errno:"ENOENT",syscall:`${e} ${t.command}`,path:t.command,spawnargs:t.args})}function Gc(t,e){if(!ur)return;let r=t.emit;t.emit=function(n,i){if(n==="exit"){let o=Fi(i,e,"spawn");if(o)return r.call(t,"error",o)}return r.apply(t,arguments)}}function Fi(t,e){return ur&&t===1&&!e.file?lr(e.original,"spawn"):null}function Vc(t,e){return ur&&t===1&&!e.file?lr(e.original,"spawnSync"):null}Gi.exports={hookChildProcess:Gc,verifyENOENT:Fi,verifyENOENTSync:Vc,notFoundError:lr}});var Wi=w((Sf,Ee)=>{"use strict";var Ji=require("child_process"),fr=Ui(),dr=Vi();function zi(t,e,r){let n=fr(t,e,r),i=Ji.spawn(n.command,n.args,n.options);return dr.hookChildProcess(i,n),i}function Jc(t,e,r){let n=fr(t,e,r),i=Ji.spawnSync(n.command,n.args,n.options);return i.error=i.error||dr.verifyENOENTSync(i.status,n),i}Ee.exports=zi;Ee.exports.spawn=zi;Ee.exports.sync=Jc;Ee.exports._parse=fr;Ee.exports._enoent=dr});var so=w((Uf,ht)=>{ht.exports=["SIGABRT","SIGALRM","SIGHUP","SIGINT","SIGTERM"];process.platform!=="win32"&&ht.exports.push("SIGVTALRM","SIGXCPU","SIGXFSZ","SIGUSR2","SIGTRAP","SIGSYS","SIGQUIT","SIGIOT");process.platform==="linux"&&ht.exports.push("SIGIO","SIGPOLL","SIGPWR","SIGSTKFLT","SIGUNUSED")});var fo=w((Ff,Re)=>{var T=global.process,fe=function(t){return t&&typeof t=="object"&&typeof t.removeListener=="function"&&typeof t.emit=="function"&&typeof t.reallyExit=="function"&&typeof t.listeners=="function"&&typeof t.kill=="function"&&typeof t.pid=="number"&&typeof t.on=="function"};fe(T)?(ao=require("assert"),Te=so(),co=/^win/i.test(T.platform),Ue=require("events"),typeof Ue!="function"&&(Ue=Ue.EventEmitter),T.__signal_exit_emitter__?$=T.__signal_exit_emitter__:($=T.__signal_exit_emitter__=new Ue,$.count=0,$.emitted={}),$.infinite||($.setMaxListeners(1/0),$.infinite=!0),Re.exports=function(t,e){if(!fe(global.process))return function(){};ao.equal(typeof t,"function","a callback must be provided for exit handler"),Ce===!1&&_r();var r="exit";e&&e.alwaysLast&&(r="afterexit");var n=function(){$.removeListener(r,t),$.listeners("exit").length===0&&$.listeners("afterexit").length===0&&mt()};return $.on(r,t),n},mt=function(){!Ce||!fe(global.process)||(Ce=!1,Te.forEach(function(e){try{T.removeListener(e,pt[e])}catch{}}),T.emit=_t,T.reallyExit=gr,$.count-=1)},Re.exports.unload=mt,de=function(e,r,n){$.emitted[e]||($.emitted[e]=!0,$.emit(e,r,n))},pt={},Te.forEach(function(t){pt[t]=function(){if(fe(global.process)){var r=T.listeners(t);r.length===$.count&&(mt(),de("exit",null,t),de("afterexit",null,t),co&&t==="SIGHUP"&&(t="SIGINT"),T.kill(T.pid,t))}}}),Re.exports.signals=function(){return Te},Ce=!1,_r=function(){Ce||!fe(global.process)||(Ce=!0,$.count+=1,Te=Te.filter(function(e){try{return T.on(e,pt[e]),!0}catch{return!1}}),T.emit=lo,T.reallyExit=uo)},Re.exports.load=_r,gr=T.reallyExit,uo=function(e){fe(global.process)&&(T.exitCode=e||0,de("exit",T.exitCode,null),de("afterexit",T.exitCode,null),gr.call(T,T.exitCode))},_t=T.emit,lo=function(e,r){if(e==="exit"&&fe(global.process)){r!==void 0&&(T.exitCode=r);var n=_t.apply(this,arguments);return de("exit",T.exitCode,null),de("afterexit",T.exitCode,null),n}else return _t.apply(this,arguments)}):Re.exports=function(){return function(){}};var ao,Te,co,Ue,$,mt,de,pt,Ce,_r,gr,uo,_t,lo});var Oo=w((Wf,xo)=>{"use strict";var{PassThrough:_u}=require("stream");xo.exports=t=>{t={...t};let{array:e}=t,{encoding:r}=t,n=r==="buffer",i=!1;e?i=!(r||n):r=r||"utf8",n&&(r=null);let o=new _u({objectMode:i});r&&o.setEncoding(r);let s=0,a=[];return o.on("data",u=>{a.push(u),i?s=a.length:s+=u.length}),o.getBufferedValue=()=>e?a:n?Buffer.concat(a,s):a.join(""),o.getBufferedLength=()=>s,o}});var Eo=w((Hf,Fe)=>{"use strict";var{constants:gu}=require("buffer"),yu=require("stream"),{promisify:wu}=require("util"),bu=Oo(),vu=wu(yu.pipeline),yt=class extends Error{constructor(){super("maxBuffer exceeded"),this.name="MaxBufferError"}};async function br(t,e){if(!t)throw new Error("Expected a stream");e={maxBuffer:1/0,...e};let{maxBuffer:r}=e,n=bu(e);return await new Promise((i,o)=>{let s=a=>{a&&n.getBufferedLength()<=gu.MAX_LENGTH&&(a.bufferedData=n.getBufferedValue()),o(a)};(async()=>{try{await vu(t,n),i()}catch(a){s(a)}})(),n.on("data",()=>{n.getBufferedLength()>r&&s(new yt)})}),n.getBufferedValue()}Fe.exports=br;Fe.exports.buffer=(t,e)=>br(t,{...e,encoding:"buffer"});Fe.exports.array=(t,e)=>br(t,{...e,array:!0});Fe.exports.MaxBufferError=yt});var To=w((Qf,Io)=>{"use strict";var{PassThrough:Su}=require("stream");Io.exports=function(){var t=[],e=new Su({objectMode:!0});return e.setMaxListeners(0),e.add=r,e.isEmpty=n,e.on("unpipe",i),Array.prototype.slice.call(arguments).forEach(r),e;function r(o){return Array.isArray(o)?(o.forEach(r),this):(t.push(o),o.once("end",i.bind(null,o)),o.once("error",e.emit.bind(e,"error")),o.pipe(e,{end:!1}),this)}function n(){return t.length==0}function i(o){t=t.filter(function(s){return s!==o}),!t.length&&e.readable&&e.end()}}});var k=I(Le()),ns=I(require("fs"));var R=I(Le());var y=class extends Error{constructor(e,r,n,...i){Array.isArray(r)&&(r=r.join(" ").trim()),super(r),Error.captureStackTrace!==void 0&&Error.captureStackTrace(this,y),this.code=e;for(let o of i)for(let s in o){let a=o[s];this[s]=Buffer.isBuffer(a)?a.toString(n.encoding):a==null?a:JSON.parse(JSON.stringify(a))}}};var Nn=function(t){return typeof t=="object"&&t!==null&&!Array.isArray(t)};var it=function(t){let e=[];for(let r=0,n=t.length;r<n;r++){let i=t[r];if(i==null||i===!1)e[r]={disabled:!0};else if(typeof i=="string")e[r]={name:i};else if(Nn(i)){if(typeof i.name!="string")throw new y("CSV_OPTION_COLUMNS_MISSING_NAME",["Option columns missing name:",`property "name" is required at position ${r}`,"when column is an object literal"]);e[r]=i}else throw new y("CSV_INVALID_COLUMN_DEFINITION",["Invalid column definition:","expect a string or a literal object,",`got ${JSON.stringify(i)} at position ${r}`])}return e};var Ht=class{constructor(e=100){this.size=e,this.length=0,this.buf=Buffer.allocUnsafe(e)}prepend(e){if(Buffer.isBuffer(e)){let r=this.length+e.length;if(r>=this.size&&(this.resize(),r>=this.size))throw Error("INVALID_BUFFER_STATE");let n=this.buf;this.buf=Buffer.allocUnsafe(this.size),e.copy(this.buf,0),n.copy(this.buf,e.length),this.length+=e.length}else{let r=this.length++;r===this.size&&this.resize();let n=this.clone();this.buf[0]=e,n.copy(this.buf,1,0,r)}}append(e){let r=this.length++;r===this.size&&this.resize(),this.buf[r]=e}clone(){return Buffer.from(this.buf.slice(0,this.length))}resize(){let e=this.length;this.size=this.size*2;let r=Buffer.allocUnsafe(this.size);this.buf.copy(r,0,0,e),this.buf=r}toString(e){return e?this.buf.slice(0,this.length).toString(e):Uint8Array.prototype.slice.call(this.buf.slice(0,this.length))}toJSON(){return this.toString("utf8")}reset(){this.length=0}},Qt=Ht;var Ua=12,Fa=13,Ga=10,Va=32,Ja=9,Dn=function(t){return{bomSkipped:!1,bufBytesStart:0,castField:t.cast_function,commenting:!1,error:void 0,enabled:t.from_line===1,escaping:!1,escapeIsQuote:Buffer.isBuffer(t.escape)&&Buffer.isBuffer(t.quote)&&Buffer.compare(t.escape,t.quote)===0,expectedRecordLength:Array.isArray(t.columns)?t.columns.length:void 0,field:new Qt(20),firstLineToHeaders:t.cast_first_line_to_header,needMoreDataSize:Math.max(t.comment!==null?t.comment.length:0,...t.delimiter.map(e=>e.length),t.quote!==null?t.quote.length:0),previousBuf:void 0,quoting:!1,stop:!1,rawBuffer:new Qt(100),record:[],recordHasError:!1,record_length:0,recordDelimiterMaxLength:t.record_delimiter.length===0?0:Math.max(...t.record_delimiter.map(e=>e.length)),trimChars:[Buffer.from(" ",t.encoding)[0],Buffer.from("	",t.encoding)[0]],wasQuoting:!1,wasRowDelimiter:!1,timchars:[Buffer.from(Buffer.from([Fa],"utf8").toString(),t.encoding),Buffer.from(Buffer.from([Ga],"utf8").toString(),t.encoding),Buffer.from(Buffer.from([Ua],"utf8").toString(),t.encoding),Buffer.from(Buffer.from([Va],"utf8").toString(),t.encoding),Buffer.from(Buffer.from([Ja],"utf8").toString(),t.encoding)]}};var $n=function(t){return t.replace(/([A-Z])/g,function(e,r){return"_"+r.toLowerCase()})};var Kt=function(t){let e={};for(let n in t)e[$n(n)]=t[n];if(e.encoding===void 0||e.encoding===!0)e.encoding="utf8";else if(e.encoding===null||e.encoding===!1)e.encoding=null;else if(typeof e.encoding!="string"&&e.encoding!==null)throw new y("CSV_INVALID_OPTION_ENCODING",["Invalid option encoding:","encoding must be a string or null to return a buffer,",`got ${JSON.stringify(e.encoding)}`],e);if(e.bom===void 0||e.bom===null||e.bom===!1)e.bom=!1;else if(e.bom!==!0)throw new y("CSV_INVALID_OPTION_BOM",["Invalid option bom:","bom must be true,",`got ${JSON.stringify(e.bom)}`],e);if(e.cast_function=null,e.cast===void 0||e.cast===null||e.cast===!1||e.cast==="")e.cast=void 0;else if(typeof e.cast=="function")e.cast_function=e.cast,e.cast=!0;else if(e.cast!==!0)throw new y("CSV_INVALID_OPTION_CAST",["Invalid option cast:","cast must be true or a function,",`got ${JSON.stringify(e.cast)}`],e);if(e.cast_date===void 0||e.cast_date===null||e.cast_date===!1||e.cast_date==="")e.cast_date=!1;else if(e.cast_date===!0)e.cast_date=function(n){let i=Date.parse(n);return isNaN(i)?n:new Date(i)};else if(typeof e.cast_date!="function")throw new y("CSV_INVALID_OPTION_CAST_DATE",["Invalid option cast_date:","cast_date must be true or a function,",`got ${JSON.stringify(e.cast_date)}`],e);if(e.cast_first_line_to_header=null,e.columns===!0)e.cast_first_line_to_header=void 0;else if(typeof e.columns=="function")e.cast_first_line_to_header=e.columns,e.columns=!0;else if(Array.isArray(e.columns))e.columns=it(e.columns);else if(e.columns===void 0||e.columns===null||e.columns===!1)e.columns=!1;else throw new y("CSV_INVALID_OPTION_COLUMNS",["Invalid option columns:","expect an array, a function or true,",`got ${JSON.stringify(e.columns)}`],e);if(e.group_columns_by_name===void 0||e.group_columns_by_name===null||e.group_columns_by_name===!1)e.group_columns_by_name=!1;else{if(e.group_columns_by_name!==!0)throw new y("CSV_INVALID_OPTION_GROUP_COLUMNS_BY_NAME",["Invalid option group_columns_by_name:","expect an boolean,",`got ${JSON.stringify(e.group_columns_by_name)}`],e);if(e.columns===!1)throw new y("CSV_INVALID_OPTION_GROUP_COLUMNS_BY_NAME",["Invalid option group_columns_by_name:","the `columns` mode must be activated."],e)}if(e.comment===void 0||e.comment===null||e.comment===!1||e.comment==="")e.comment=null;else if(typeof e.comment=="string"&&(e.comment=Buffer.from(e.comment,e.encoding)),!Buffer.isBuffer(e.comment))throw new y("CSV_INVALID_OPTION_COMMENT",["Invalid option comment:","comment must be a buffer or a string,",`got ${JSON.stringify(e.comment)}`],e);let r=JSON.stringify(e.delimiter);if(Array.isArray(e.delimiter)||(e.delimiter=[e.delimiter]),e.delimiter.length===0)throw new y("CSV_INVALID_OPTION_DELIMITER",["Invalid option delimiter:","delimiter must be a non empty string or buffer or array of string|buffer,",`got ${r}`],e);if(e.delimiter=e.delimiter.map(function(n){if(n==null||n===!1)return Buffer.from(",",e.encoding);if(typeof n=="string"&&(n=Buffer.from(n,e.encoding)),!Buffer.isBuffer(n)||n.length===0)throw new y("CSV_INVALID_OPTION_DELIMITER",["Invalid option delimiter:","delimiter must be a non empty string or buffer or array of string|buffer,",`got ${r}`],e);return n}),e.escape===void 0||e.escape===!0?e.escape=Buffer.from('"',e.encoding):typeof e.escape=="string"?e.escape=Buffer.from(e.escape,e.encoding):(e.escape===null||e.escape===!1)&&(e.escape=null),e.escape!==null&&!Buffer.isBuffer(e.escape))throw new Error(`Invalid Option: escape must be a buffer, a string or a boolean, got ${JSON.stringify(e.escape)}`);if(e.from===void 0||e.from===null)e.from=1;else if(typeof e.from=="string"&&/\d+/.test(e.from)&&(e.from=parseInt(e.from)),Number.isInteger(e.from)){if(e.from<0)throw new Error(`Invalid Option: from must be a positive integer, got ${JSON.stringify(t.from)}`)}else throw new Error(`Invalid Option: from must be an integer, got ${JSON.stringify(e.from)}`);if(e.from_line===void 0||e.from_line===null)e.from_line=1;else if(typeof e.from_line=="string"&&/\d+/.test(e.from_line)&&(e.from_line=parseInt(e.from_line)),Number.isInteger(e.from_line)){if(e.from_line<=0)throw new Error(`Invalid Option: from_line must be a positive integer greater than 0, got ${JSON.stringify(t.from_line)}`)}else throw new Error(`Invalid Option: from_line must be an integer, got ${JSON.stringify(t.from_line)}`);if(e.ignore_last_delimiters===void 0||e.ignore_last_delimiters===null)e.ignore_last_delimiters=!1;else if(typeof e.ignore_last_delimiters=="number")e.ignore_last_delimiters=Math.floor(e.ignore_last_delimiters),e.ignore_last_delimiters===0&&(e.ignore_last_delimiters=!1);else if(typeof e.ignore_last_delimiters!="boolean")throw new y("CSV_INVALID_OPTION_IGNORE_LAST_DELIMITERS",["Invalid option `ignore_last_delimiters`:","the value must be a boolean value or an integer,",`got ${JSON.stringify(e.ignore_last_delimiters)}`],e);if(e.ignore_last_delimiters===!0&&e.columns===!1)throw new y("CSV_IGNORE_LAST_DELIMITERS_REQUIRES_COLUMNS",["The option `ignore_last_delimiters`","requires the activation of the `columns` option"],e);if(e.info===void 0||e.info===null||e.info===!1)e.info=!1;else if(e.info!==!0)throw new Error(`Invalid Option: info must be true, got ${JSON.stringify(e.info)}`);if(e.max_record_size===void 0||e.max_record_size===null||e.max_record_size===!1)e.max_record_size=0;else if(!(Number.isInteger(e.max_record_size)&&e.max_record_size>=0))if(typeof e.max_record_size=="string"&&/\d+/.test(e.max_record_size))e.max_record_size=parseInt(e.max_record_size);else throw new Error(`Invalid Option: max_record_size must be a positive integer, got ${JSON.stringify(e.max_record_size)}`);if(e.objname===void 0||e.objname===null||e.objname===!1)e.objname=void 0;else if(Buffer.isBuffer(e.objname)){if(e.objname.length===0)throw new Error("Invalid Option: objname must be a non empty buffer");e.encoding===null||(e.objname=e.objname.toString(e.encoding))}else if(typeof e.objname=="string"){if(e.objname.length===0)throw new Error("Invalid Option: objname must be a non empty string")}else if(typeof e.objname!="number")throw new Error(`Invalid Option: objname must be a string or a buffer, got ${e.objname}`);if(e.objname!==void 0){if(typeof e.objname=="number"){if(e.columns!==!1)throw Error("Invalid Option: objname index cannot be combined with columns or be defined as a field")}else if(e.columns===!1)throw Error("Invalid Option: objname field must be combined with columns or be defined as an index")}if(e.on_record===void 0||e.on_record===null)e.on_record=void 0;else if(typeof e.on_record!="function")throw new y("CSV_INVALID_OPTION_ON_RECORD",["Invalid option `on_record`:","expect a function,",`got ${JSON.stringify(e.on_record)}`],e);if(e.quote===null||e.quote===!1||e.quote==="")e.quote=null;else if(e.quote===void 0||e.quote===!0?e.quote=Buffer.from('"',e.encoding):typeof e.quote=="string"&&(e.quote=Buffer.from(e.quote,e.encoding)),!Buffer.isBuffer(e.quote))throw new Error(`Invalid Option: quote must be a buffer or a string, got ${JSON.stringify(e.quote)}`);if(e.raw===void 0||e.raw===null||e.raw===!1)e.raw=!1;else if(e.raw!==!0)throw new Error(`Invalid Option: raw must be true, got ${JSON.stringify(e.raw)}`);if(e.record_delimiter===void 0)e.record_delimiter=[];else if(typeof e.record_delimiter=="string"||Buffer.isBuffer(e.record_delimiter)){if(e.record_delimiter.length===0)throw new y("CSV_INVALID_OPTION_RECORD_DELIMITER",["Invalid option `record_delimiter`:","value must be a non empty string or buffer,",`got ${JSON.stringify(e.record_delimiter)}`],e);e.record_delimiter=[e.record_delimiter]}else if(!Array.isArray(e.record_delimiter))throw new y("CSV_INVALID_OPTION_RECORD_DELIMITER",["Invalid option `record_delimiter`:","value must be a string, a buffer or array of string|buffer,",`got ${JSON.stringify(e.record_delimiter)}`],e);if(e.record_delimiter=e.record_delimiter.map(function(n,i){if(typeof n!="string"&&!Buffer.isBuffer(n))throw new y("CSV_INVALID_OPTION_RECORD_DELIMITER",["Invalid option `record_delimiter`:","value must be a string, a buffer or array of string|buffer",`at index ${i},`,`got ${JSON.stringify(n)}`],e);if(n.length===0)throw new y("CSV_INVALID_OPTION_RECORD_DELIMITER",["Invalid option `record_delimiter`:","value must be a non empty string or buffer",`at index ${i},`,`got ${JSON.stringify(n)}`],e);return typeof n=="string"&&(n=Buffer.from(n,e.encoding)),n}),typeof e.relax_column_count!="boolean")if(e.relax_column_count===void 0||e.relax_column_count===null)e.relax_column_count=!1;else throw new Error(`Invalid Option: relax_column_count must be a boolean, got ${JSON.stringify(e.relax_column_count)}`);if(typeof e.relax_column_count_less!="boolean")if(e.relax_column_count_less===void 0||e.relax_column_count_less===null)e.relax_column_count_less=!1;else throw new Error(`Invalid Option: relax_column_count_less must be a boolean, got ${JSON.stringify(e.relax_column_count_less)}`);if(typeof e.relax_column_count_more!="boolean")if(e.relax_column_count_more===void 0||e.relax_column_count_more===null)e.relax_column_count_more=!1;else throw new Error(`Invalid Option: relax_column_count_more must be a boolean, got ${JSON.stringify(e.relax_column_count_more)}`);if(typeof e.relax_quotes!="boolean")if(e.relax_quotes===void 0||e.relax_quotes===null)e.relax_quotes=!1;else throw new Error(`Invalid Option: relax_quotes must be a boolean, got ${JSON.stringify(e.relax_quotes)}`);if(typeof e.skip_empty_lines!="boolean")if(e.skip_empty_lines===void 0||e.skip_empty_lines===null)e.skip_empty_lines=!1;else throw new Error(`Invalid Option: skip_empty_lines must be a boolean, got ${JSON.stringify(e.skip_empty_lines)}`);if(typeof e.skip_records_with_empty_values!="boolean")if(e.skip_records_with_empty_values===void 0||e.skip_records_with_empty_values===null)e.skip_records_with_empty_values=!1;else throw new Error(`Invalid Option: skip_records_with_empty_values must be a boolean, got ${JSON.stringify(e.skip_records_with_empty_values)}`);if(typeof e.skip_records_with_error!="boolean")if(e.skip_records_with_error===void 0||e.skip_records_with_error===null)e.skip_records_with_error=!1;else throw new Error(`Invalid Option: skip_records_with_error must be a boolean, got ${JSON.stringify(e.skip_records_with_error)}`);if(e.rtrim===void 0||e.rtrim===null||e.rtrim===!1)e.rtrim=!1;else if(e.rtrim!==!0)throw new Error(`Invalid Option: rtrim must be a boolean, got ${JSON.stringify(e.rtrim)}`);if(e.ltrim===void 0||e.ltrim===null||e.ltrim===!1)e.ltrim=!1;else if(e.ltrim!==!0)throw new Error(`Invalid Option: ltrim must be a boolean, got ${JSON.stringify(e.ltrim)}`);if(e.trim===void 0||e.trim===null||e.trim===!1)e.trim=!1;else if(e.trim!==!0)throw new Error(`Invalid Option: trim must be a boolean, got ${JSON.stringify(e.trim)}`);if(e.trim===!0&&t.ltrim!==!1?e.ltrim=!0:e.ltrim!==!0&&(e.ltrim=!1),e.trim===!0&&t.rtrim!==!1?e.rtrim=!0:e.rtrim!==!0&&(e.rtrim=!1),e.to===void 0||e.to===null)e.to=-1;else if(typeof e.to=="string"&&/\d+/.test(e.to)&&(e.to=parseInt(e.to)),Number.isInteger(e.to)){if(e.to<=0)throw new Error(`Invalid Option: to must be a positive integer greater than 0, got ${JSON.stringify(t.to)}`)}else throw new Error(`Invalid Option: to must be an integer, got ${JSON.stringify(t.to)}`);if(e.to_line===void 0||e.to_line===null)e.to_line=-1;else if(typeof e.to_line=="string"&&/\d+/.test(e.to_line)&&(e.to_line=parseInt(e.to_line)),Number.isInteger(e.to_line)){if(e.to_line<=0)throw new Error(`Invalid Option: to_line must be a positive integer greater than 0, got ${JSON.stringify(t.to_line)}`)}else throw new Error(`Invalid Option: to_line must be an integer, got ${JSON.stringify(t.to_line)}`);return e};var Bn=function(t){return t.every(e=>e==null||e.toString&&e.toString().trim()==="")},za=13,Wa=10,ve={utf8:Buffer.from([239,187,191]),utf16le:Buffer.from([255,254])},Ln=function(t={}){let e={bytes:0,comment_lines:0,empty_lines:0,invalid_field_length:0,lines:1,records:0},r=Kt(t);return{info:e,original_options:t,options:r,state:Dn(r),__needMoreData:function(n,i,o){if(o)return!1;let{encoding:s,escape:a,quote:u}=this.options,{quoting:c,needMoreDataSize:l,recordDelimiterMaxLength:f}=this.state,d=i-n-1,S=Math.max(l,f===0?Buffer.from(`\r
`,s).length:f,c?(a===null?0:a.length)+u.length:0,c?u.length+f:0);return d<S},parse:function(n,i,o,s){let{bom:a,encoding:u,from_line:c,ltrim:l,max_record_size:f,raw:d,relax_quotes:S,rtrim:E,skip_empty_lines:_,to:L,to_line:A}=this.options,{comment:b,escape:g,quote:N,record_delimiter:me}=this.options,{bomSkipped:Je,previousBuf:ce,rawBuffer:is,escapeIsQuote:os}=this.state,x;if(ce===void 0)if(n===void 0){s();return}else x=n;else ce!==void 0&&n===void 0?x=ce:x=Buffer.concat([ce,n]);if(Je===!1)if(a===!1)this.state.bomSkipped=!0;else if(x.length<3){if(i===!1){this.state.previousBuf=x;return}}else{for(let P in ve)if(ve[P].compare(x,0,ve[P].length)===0){let ee=ve[P].length;this.state.bufBytesStart+=ee,x=x.slice(ee),this.options=Kt({...this.original_options,encoding:P}),{comment:b,escape:g,quote:N}=this.options;break}this.state.bomSkipped=!0}let Ot=x.length,p;for(p=0;p<Ot&&!this.__needMoreData(p,Ot,i);p++){if(this.state.wasRowDelimiter===!0&&(this.info.lines++,this.state.wasRowDelimiter=!1),A!==-1&&this.info.lines>A){this.state.stop=!0,s();return}this.state.quoting===!1&&me.length===0&&this.__autoDiscoverRecordDelimiter(x,p)&&(me=this.options.record_delimiter);let P=x[p];if(d===!0&&is.append(P),(P===za||P===Wa)&&this.state.wasRowDelimiter===!1&&(this.state.wasRowDelimiter=!0),this.state.escaping===!0)this.state.escaping=!1;else{if(g!==null&&this.state.quoting===!0&&this.__isEscape(x,p,P)&&p+g.length<Ot)if(os){if(this.__isQuote(x,p+g.length)){this.state.escaping=!0,p+=g.length-1;continue}}else{this.state.escaping=!0,p+=g.length-1;continue}if(this.state.commenting===!1&&this.__isQuote(x,p))if(this.state.quoting===!0){let q=x[p+N.length],Ae=E&&this.__isCharTrimable(x,p+N.length),ue=b!==null&&this.__compareBytes(b,x,p+N.length,q),te=this.__isDelimiter(x,p+N.length,q),ze=me.length===0?this.__autoDiscoverRecordDelimiter(x,p+N.length):this.__isRecordDelimiter(q,x,p+N.length);if(g!==null&&this.__isEscape(x,p,P)&&this.__isQuote(x,p+g.length))p+=g.length-1;else if(!q||te||ze||ue||Ae){this.state.quoting=!1,this.state.wasQuoting=!0,p+=N.length-1;continue}else if(S===!1){let Ne=this.__error(new y("CSV_INVALID_CLOSING_QUOTE",["Invalid Closing Quote:",`got "${String.fromCharCode(q)}"`,`at line ${this.info.lines}`,"instead of delimiter, record delimiter, trimable character","(if activated) or comment"],this.options,this.__infoField()));if(Ne!==void 0)return Ne}else this.state.quoting=!1,this.state.wasQuoting=!0,this.state.field.prepend(N),p+=N.length-1}else if(this.state.field.length!==0){if(S===!1){let q=this.__infoField(),Ae=Object.keys(ve).map(te=>ve[te].equals(this.state.field.toString())?te:!1).filter(Boolean)[0],ue=this.__error(new y("INVALID_OPENING_QUOTE",["Invalid Opening Quote:",`a quote is found on field ${JSON.stringify(q.column)} at line ${q.lines}, value is ${JSON.stringify(this.state.field.toString(u))}`,Ae?`(${Ae} bom)`:void 0],this.options,q,{field:this.state.field}));if(ue!==void 0)return ue}}else{this.state.quoting=!0,p+=N.length-1;continue}if(this.state.quoting===!1){let q=this.__isRecordDelimiter(P,x,p);if(q!==0){if(this.state.commenting&&this.state.wasQuoting===!1&&this.state.record.length===0&&this.state.field.length===0)this.info.comment_lines++;else{if(this.state.enabled===!1&&this.info.lines+(this.state.wasRowDelimiter===!0?1:0)>=c){this.state.enabled=!0,this.__resetField(),this.__resetRecord(),p+=q-1;continue}if(_===!0&&this.state.wasQuoting===!1&&this.state.record.length===0&&this.state.field.length===0){this.info.empty_lines++,p+=q-1;continue}this.info.bytes=this.state.bufBytesStart+p;let ze=this.__onField();if(ze!==void 0)return ze;this.info.bytes=this.state.bufBytesStart+p+q;let Ne=this.__onRecord(o);if(Ne!==void 0)return Ne;if(L!==-1&&this.info.records>=L){this.state.stop=!0,s();return}}this.state.commenting=!1,p+=q-1;continue}if(this.state.commenting)continue;if((b===null?0:this.__compareBytes(b,x,p,P))!==0){this.state.commenting=!0;continue}let ue=this.__isDelimiter(x,p,P);if(ue!==0){this.info.bytes=this.state.bufBytesStart+p;let te=this.__onField();if(te!==void 0)return te;p+=ue-1;continue}}}if(this.state.commenting===!1&&f!==0&&this.state.record_length+this.state.field.length>f)return this.__error(new y("CSV_MAX_RECORD_SIZE",["Max Record Size:","record exceed the maximum number of tolerated bytes",`of ${f}`,`at line ${this.info.lines}`],this.options,this.__infoField()));let ee=l===!1||this.state.quoting===!0||this.state.field.length!==0||!this.__isCharTrimable(x,p),ss=E===!1||this.state.wasQuoting===!1;if(ee===!0&&ss===!0)this.state.field.append(P);else{if(E===!0&&!this.__isCharTrimable(x,p))return this.__error(new y("CSV_NON_TRIMABLE_CHAR_AFTER_CLOSING_QUOTE",["Invalid Closing Quote:","found non trimable byte after quote",`at line ${this.info.lines}`],this.options,this.__infoField()));ee===!1&&(p+=this.__isCharTrimable(x,p)-1);continue}}if(i===!0)if(this.state.quoting===!0){let P=this.__error(new y("CSV_QUOTE_NOT_CLOSED",["Quote Not Closed:",`the parsing is finished with an opening quote at line ${this.info.lines}`],this.options,this.__infoField()));if(P!==void 0)return P}else if(this.state.wasQuoting===!0||this.state.record.length!==0||this.state.field.length!==0){this.info.bytes=this.state.bufBytesStart+p;let P=this.__onField();if(P!==void 0)return P;let ee=this.__onRecord(o);if(ee!==void 0)return ee}else this.state.wasRowDelimiter===!0?this.info.empty_lines++:this.state.commenting===!0&&this.info.comment_lines++;else this.state.bufBytesStart+=p,this.state.previousBuf=x.slice(p);this.state.wasRowDelimiter===!0&&(this.info.lines++,this.state.wasRowDelimiter=!1)},__onRecord:function(n){let{columns:i,group_columns_by_name:o,encoding:s,info:a,from:u,relax_column_count:c,relax_column_count_less:l,relax_column_count_more:f,raw:d,skip_records_with_empty_values:S}=this.options,{enabled:E,record:_}=this.state;if(E===!1)return this.__resetRecord();let L=_.length;if(i===!0){if(S===!0&&Bn(_)){this.__resetRecord();return}return this.__firstLineToColumns(_)}if(i===!1&&this.info.records===0&&(this.state.expectedRecordLength=L),L!==this.state.expectedRecordLength){let A=i===!1?new y("CSV_RECORD_INCONSISTENT_FIELDS_LENGTH",["Invalid Record Length:",`expect ${this.state.expectedRecordLength},`,`got ${L} on line ${this.info.lines}`],this.options,this.__infoField(),{record:_}):new y("CSV_RECORD_INCONSISTENT_COLUMNS",["Invalid Record Length:",`columns length is ${i.length},`,`got ${L} on line ${this.info.lines}`],this.options,this.__infoField(),{record:_});if(c===!0||l===!0&&L<this.state.expectedRecordLength||f===!0&&L>this.state.expectedRecordLength)this.info.invalid_field_length++,this.state.error=A;else{let b=this.__error(A);if(b)return b}}if(S===!0&&Bn(_)){this.__resetRecord();return}if(this.state.recordHasError===!0){this.__resetRecord(),this.state.recordHasError=!1;return}if(this.info.records++,u===1||this.info.records>=u){let{objname:A}=this.options;if(i!==!1){let b={};for(let g=0,N=_.length;g<N;g++)i[g]===void 0||i[g].disabled||(o===!0&&b[i[g].name]!==void 0?Array.isArray(b[i[g].name])?b[i[g].name]=b[i[g].name].concat(_[g]):b[i[g].name]=[b[i[g].name],_[g]]:b[i[g].name]=_[g]);if(d===!0||a===!0){let g=Object.assign({record:b},d===!0?{raw:this.state.rawBuffer.toString(s)}:{},a===!0?{info:this.__infoRecord()}:{}),N=this.__push(A===void 0?g:[b[A],g],n);if(N)return N}else{let g=this.__push(A===void 0?b:[b[A],b],n);if(g)return g}}else if(d===!0||a===!0){let b=Object.assign({record:_},d===!0?{raw:this.state.rawBuffer.toString(s)}:{},a===!0?{info:this.__infoRecord()}:{}),g=this.__push(A===void 0?b:[_[A],b],n);if(g)return g}else{let b=this.__push(A===void 0?_:[_[A],_],n);if(b)return b}}this.__resetRecord()},__firstLineToColumns:function(n){let{firstLineToHeaders:i}=this.state;try{let o=i===void 0?n:i.call(null,n);if(!Array.isArray(o))return this.__error(new y("CSV_INVALID_COLUMN_MAPPING",["Invalid Column Mapping:","expect an array from column function,",`got ${JSON.stringify(o)}`],this.options,this.__infoField(),{headers:o}));let s=it(o);this.state.expectedRecordLength=s.length,this.options.columns=s,this.__resetRecord();return}catch(o){return o}},__resetRecord:function(){this.options.raw===!0&&this.state.rawBuffer.reset(),this.state.error=void 0,this.state.record=[],this.state.record_length=0},__onField:function(){let{cast:n,encoding:i,rtrim:o,max_record_size:s}=this.options,{enabled:a,wasQuoting:u}=this.state;if(a===!1)return this.__resetField();let c=this.state.field.toString(i);if(o===!0&&u===!1&&(c=c.trimRight()),n===!0){let[l,f]=this.__cast(c);if(l!==void 0)return l;c=f}this.state.record.push(c),s!==0&&typeof c=="string"&&(this.state.record_length+=c.length),this.__resetField()},__resetField:function(){this.state.field.reset(),this.state.wasQuoting=!1},__push:function(n,i){let{on_record:o}=this.options;if(o!==void 0){let s=this.__infoRecord();try{n=o.call(null,n,s)}catch(a){return a}if(n==null)return}i(n)},__cast:function(n){let{columns:i,relax_column_count:o}=this.options;if(Array.isArray(i)===!0&&o&&this.options.columns.length<=this.state.record.length)return[void 0,void 0];if(this.state.castField!==null)try{let a=this.__infoField();return[void 0,this.state.castField.call(null,n,a)]}catch(a){return[a]}if(this.__isFloat(n))return[void 0,parseFloat(n)];if(this.options.cast_date!==!1){let a=this.__infoField();return[void 0,this.options.cast_date.call(null,n,a)]}return[void 0,n]},__isCharTrimable:function(n,i){return((s,a)=>{let{timchars:u}=this.state;e:for(let c=0;c<u.length;c++){let l=u[c];for(let f=0;f<l.length;f++)if(l[f]!==s[a+f])continue e;return l.length}return 0})(n,i)},__isFloat:function(n){return n-parseFloat(n)+1>=0},__compareBytes:function(n,i,o,s){if(n[0]!==s)return 0;let a=n.length;for(let u=1;u<a;u++)if(n[u]!==i[o+u])return 0;return a},__isDelimiter:function(n,i,o){let{delimiter:s,ignore_last_delimiters:a}=this.options;if(a===!0&&this.state.record.length===this.options.columns.length-1)return 0;if(a!==!1&&typeof a=="number"&&this.state.record.length===a-1)return 0;e:for(let u=0;u<s.length;u++){let c=s[u];if(c[0]===o){for(let l=1;l<c.length;l++)if(c[l]!==n[i+l])continue e;return c.length}}return 0},__isRecordDelimiter:function(n,i,o){let{record_delimiter:s}=this.options,a=s.length;e:for(let u=0;u<a;u++){let c=s[u],l=c.length;if(c[0]===n){for(let f=1;f<l;f++)if(c[f]!==i[o+f])continue e;return c.length}}return 0},__isEscape:function(n,i,o){let{escape:s}=this.options;if(s===null)return!1;let a=s.length;if(s[0]===o){for(let u=0;u<a;u++)if(s[u]!==n[i+u])return!1;return!0}return!1},__isQuote:function(n,i){let{quote:o}=this.options;if(o===null)return!1;let s=o.length;for(let a=0;a<s;a++)if(o[a]!==n[i+a])return!1;return!0},__autoDiscoverRecordDelimiter:function(n,i){let{encoding:o}=this.options,s=[Buffer.from(`\r
`,o),Buffer.from(`
`,o),Buffer.from("\r",o)];e:for(let a=0;a<s.length;a++){let u=s[a].length;for(let c=0;c<u;c++)if(s[a][c]!==n[i+c])continue e;return this.options.record_delimiter.push(s[a]),this.state.recordDelimiterMaxLength=s[a].length,s[a].length}return 0},__error:function(n){let{encoding:i,raw:o,skip_records_with_error:s}=this.options,a=typeof n=="string"?new Error(n):n;if(s){this.state.recordHasError=!0,this.options.on_skip!==void 0&&this.options.on_skip(a,o?this.state.rawBuffer.toString(i):void 0);return}else return a},__infoDataSet:function(){return{...this.info,columns:this.options.columns}},__infoRecord:function(){let{columns:n,raw:i,encoding:o}=this.options;return{...this.__infoDataSet(),error:this.state.error,header:n===!0,index:this.state.record.length,raw:i?this.state.rawBuffer.toString(o):void 0}},__infoField:function(){let{columns:n}=this.options,i=Array.isArray(n);return{...this.__infoRecord(),column:i===!0?n.length>this.state.record.length?n[this.state.record.length].name:null:this.state.record.length,quoting:this.state.wasQuoting}}}};var qn=function(t,e={}){typeof t=="string"&&(t=Buffer.from(t));let r=e&&e.objname?{}:[],n=Ln(e),i=u=>{n.options.objname===void 0?r.push(u):r[u[0]]=u[1]},o=()=>{},s=n.parse(t,!1,i,o);if(s!==void 0)throw s;let a=n.parse(void 0,!0,i,o);if(a!==void 0)throw a;return r};var jn=I(require("fs")),Mn=I(require("os")),Se=I(require("path"));function kn(){return{files:Xt(R.getInput("files")),workdir:R.getInput("workdir")||".",targets:Xt(R.getInput("targets")),noCache:R.getBooleanInput("no-cache"),pull:R.getBooleanInput("pull"),load:R.getBooleanInput("load"),push:R.getBooleanInput("push"),set:Xt(R.getInput("set")),source:R.getInput("source"),project:R.getInput("project"),token:R.getInput("token")||process.env.DEPOT_TOKEN,buildxFallback:R.getBooleanInput("buildx-fallback")}}var qe;function ot(){return qe||(R.getState("tempDir")?R.getState("tempDir"):(qe=jn.mkdtempSync(Se.join(Mn.tmpdir(),"depot-build-push-").split(Se.sep).join(Se.posix.sep)),R.saveState("tempDir",qe),qe))}var Yt=!!R.getState("isPost");Yt||R.saveState("isPost","true");function Xt(t){return t=t.trim(),t===""?[]:qn(t,{columns:!1,relaxColumnCount:!0,relaxQuotes:!0,skipEmptyLines:!0}).flatMap(r=>r).map(r=>r.trim()).filter(r=>r)}var he=I(Le()),St=I(oi()),Ko=I(qt()),Xo=I(rr());var Vo=require("node:buffer"),Jo=I(require("node:path"),1),vt=I(require("node:child_process"),1),Ge=I(require("node:process"),1),zo=I(Wi(),1);function hr(t){let e=typeof t=="string"?`
`:`
`.charCodeAt(),r=typeof t=="string"?"\r":"\r".charCodeAt();return t[t.length-1]===e&&(t=t.slice(0,-1)),t[t.length-1]===r&&(t=t.slice(0,-1)),t}var Me=I(require("node:process"),1),Ie=I(require("node:path"),1),Hi=I(require("node:url"),1);function lt(t={}){let{env:e=process.env,platform:r=process.platform}=t;return r!=="win32"?"PATH":Object.keys(e).reverse().find(n=>n.toUpperCase()==="PATH")||"Path"}function zc(t={}){let{cwd:e=Me.default.cwd(),path:r=Me.default.env[lt()],execPath:n=Me.default.execPath}=t,i,o=e instanceof URL?Hi.default.fileURLToPath(e):e,s=Ie.default.resolve(o),a=[];for(;i!==s;)a.push(Ie.default.join(s,"node_modules/.bin")),i=s,s=Ie.default.resolve(s,"..");return a.push(Ie.default.resolve(o,n,"..")),[...a,r].join(Ie.default.delimiter)}function Qi({env:t=Me.default.env,...e}={}){t={...t};let r=lt({env:t});return e.path=t[r],t[r]=zc(e),t}var Wc=(t,e,r,n)=>{if(r==="length"||r==="prototype"||r==="arguments"||r==="caller")return;let i=Object.getOwnPropertyDescriptor(t,r),o=Object.getOwnPropertyDescriptor(e,r);!Hc(i,o)&&n||Object.defineProperty(t,r,o)},Hc=function(t,e){return t===void 0||t.configurable||t.writable===e.writable&&t.enumerable===e.enumerable&&t.configurable===e.configurable&&(t.writable||t.value===e.value)},Qc=(t,e)=>{let r=Object.getPrototypeOf(e);r!==Object.getPrototypeOf(t)&&Object.setPrototypeOf(t,r)},Kc=(t,e)=>`/* Wrapped ${t}*/
${e}`,Xc=Object.getOwnPropertyDescriptor(Function.prototype,"toString"),Yc=Object.getOwnPropertyDescriptor(Function.prototype.toString,"name"),Zc=(t,e,r)=>{let n=r===""?"":`with ${r.trim()}() `,i=Kc.bind(null,n,e.toString());Object.defineProperty(i,"name",Yc),Object.defineProperty(t,"toString",{...Xc,value:i})};function mr(t,e,{ignoreNonConfigurable:r=!1}={}){let{name:n}=t;for(let i of Reflect.ownKeys(e))Wc(t,e,i,r);return Qc(t,e),Zc(t,e,n),t}var ft=new WeakMap,Ki=(t,e={})=>{if(typeof t!="function")throw new TypeError("Expected a function");let r,n=0,i=t.displayName||t.name||"<anonymous>",o=function(...s){if(ft.set(o,++n),n===1)r=t.apply(this,s),t=null;else if(e.throw===!0)throw new Error(`Function \`${i}\` can only be called once`);return r};return mr(o,t),ft.set(o,n),o};Ki.callCount=t=>{if(!ft.has(t))throw new Error(`The given function \`${t.name}\` is not wrapped by the \`onetime\` package`);return ft.get(t)};var Xi=Ki;var no=require("node:os");var Yi=()=>{let t=eo-Zi+1;return Array.from({length:t},eu)},eu=(t,e)=>({name:`SIGRT${e+1}`,number:Zi+e,action:"terminate",description:"Application-specific signal (realtime)",standard:"posix"}),Zi=34,eo=64;var ro=require("node:os");var to=[{name:"SIGHUP",number:1,action:"terminate",description:"Terminal closed",standard:"posix"},{name:"SIGINT",number:2,action:"terminate",description:"User interruption with CTRL-C",standard:"ansi"},{name:"SIGQUIT",number:3,action:"core",description:"User interruption with CTRL-\\",standard:"posix"},{name:"SIGILL",number:4,action:"core",description:"Invalid machine instruction",standard:"ansi"},{name:"SIGTRAP",number:5,action:"core",description:"Debugger breakpoint",standard:"posix"},{name:"SIGABRT",number:6,action:"core",description:"Aborted",standard:"ansi"},{name:"SIGIOT",number:6,action:"core",description:"Aborted",standard:"bsd"},{name:"SIGBUS",number:7,action:"core",description:"Bus error due to misaligned, non-existing address or paging error",standard:"bsd"},{name:"SIGEMT",number:7,action:"terminate",description:"Command should be emulated but is not implemented",standard:"other"},{name:"SIGFPE",number:8,action:"core",description:"Floating point arithmetic error",standard:"ansi"},{name:"SIGKILL",number:9,action:"terminate",description:"Forced termination",standard:"posix",forced:!0},{name:"SIGUSR1",number:10,action:"terminate",description:"Application-specific signal",standard:"posix"},{name:"SIGSEGV",number:11,action:"core",description:"Segmentation fault",standard:"ansi"},{name:"SIGUSR2",number:12,action:"terminate",description:"Application-specific signal",standard:"posix"},{name:"SIGPIPE",number:13,action:"terminate",description:"Broken pipe or socket",standard:"posix"},{name:"SIGALRM",number:14,action:"terminate",description:"Timeout or timer",standard:"posix"},{name:"SIGTERM",number:15,action:"terminate",description:"Termination",standard:"ansi"},{name:"SIGSTKFLT",number:16,action:"terminate",description:"Stack is empty or overflowed",standard:"other"},{name:"SIGCHLD",number:17,action:"ignore",description:"Child process terminated, paused or unpaused",standard:"posix"},{name:"SIGCLD",number:17,action:"ignore",description:"Child process terminated, paused or unpaused",standard:"other"},{name:"SIGCONT",number:18,action:"unpause",description:"Unpaused",standard:"posix",forced:!0},{name:"SIGSTOP",number:19,action:"pause",description:"Paused",standard:"posix",forced:!0},{name:"SIGTSTP",number:20,action:"pause",description:'Paused using CTRL-Z or "suspend"',standard:"posix"},{name:"SIGTTIN",number:21,action:"pause",description:"Background process cannot read terminal input",standard:"posix"},{name:"SIGBREAK",number:21,action:"terminate",description:"User interruption with CTRL-BREAK",standard:"other"},{name:"SIGTTOU",number:22,action:"pause",description:"Background process cannot write to terminal output",standard:"posix"},{name:"SIGURG",number:23,action:"ignore",description:"Socket received out-of-band data",standard:"bsd"},{name:"SIGXCPU",number:24,action:"core",description:"Process timed out",standard:"bsd"},{name:"SIGXFSZ",number:25,action:"core",description:"File too big",standard:"bsd"},{name:"SIGVTALRM",number:26,action:"terminate",description:"Timeout or timer",standard:"bsd"},{name:"SIGPROF",number:27,action:"terminate",description:"Timeout or timer",standard:"bsd"},{name:"SIGWINCH",number:28,action:"ignore",description:"Terminal window size changed",standard:"bsd"},{name:"SIGIO",number:29,action:"terminate",description:"I/O is available",standard:"other"},{name:"SIGPOLL",number:29,action:"terminate",description:"Watched event",standard:"other"},{name:"SIGINFO",number:29,action:"ignore",description:"Request for process information",standard:"other"},{name:"SIGPWR",number:30,action:"terminate",description:"Device running out of power",standard:"systemv"},{name:"SIGSYS",number:31,action:"core",description:"Invalid system call",standard:"other"},{name:"SIGUNUSED",number:31,action:"terminate",description:"Invalid system call",standard:"other"}];var pr=()=>{let t=Yi();return[...to,...t].map(tu)},tu=({name:t,number:e,description:r,action:n,forced:i=!1,standard:o})=>{let{signals:{[t]:s}}=ro.constants,a=s!==void 0;return{name:t,number:a?s:e,description:r,supported:a,action:n,forced:i,standard:o}};var ru=()=>{let t=pr();return Object.fromEntries(t.map(nu))},nu=({name:t,number:e,description:r,supported:n,action:i,forced:o,standard:s})=>[t,{name:t,number:e,description:r,supported:n,action:i,forced:o,standard:s}],io=ru(),iu=()=>{let t=pr(),e=64+1,r=Array.from({length:e},(n,i)=>ou(i,t));return Object.assign({},...r)},ou=(t,e)=>{let r=su(t,e);if(r===void 0)return{};let{name:n,description:i,supported:o,action:s,forced:a,standard:u}=r;return{[t]:{name:n,number:t,description:i,supported:o,action:s,forced:a,standard:u}}},su=(t,e)=>{let r=e.find(({name:n})=>no.constants.signals[n]===t);return r!==void 0?r:e.find(n=>n.number===t)},Lf=iu();var au=({timedOut:t,timeout:e,errorCode:r,signal:n,signalDescription:i,exitCode:o,isCanceled:s})=>t?`timed out after ${e} milliseconds`:s?"was canceled":r!==void 0?`failed with ${r}`:n!==void 0?`was killed with ${n} (${i})`:o!==void 0?`failed with exit code ${o}`:"failed",ke=({stdout:t,stderr:e,all:r,error:n,signal:i,exitCode:o,command:s,escapedCommand:a,timedOut:u,isCanceled:c,killed:l,parsed:{options:{timeout:f}}})=>{o=o===null?void 0:o,i=i===null?void 0:i;let d=i===void 0?void 0:io[i].description,S=n&&n.code,_=`Command ${au({timedOut:u,timeout:f,errorCode:S,signal:i,signalDescription:d,exitCode:o,isCanceled:c})}: ${s}`,L=Object.prototype.toString.call(n)==="[object Error]",A=L?`${_}
${n.message}`:_,b=[A,e,t].filter(Boolean).join(`
`);return L?(n.originalMessage=n.message,n.message=b):n=new Error(b),n.shortMessage=A,n.command=s,n.escapedCommand=a,n.exitCode=o,n.signal=i,n.signalDescription=d,n.stdout=t,n.stderr=e,r!==void 0&&(n.all=r),"bufferedData"in n&&delete n.bufferedData,n.failed=!0,n.timedOut=!!u,n.isCanceled=c,n.killed=l&&!u,n};var dt=["stdin","stdout","stderr"],cu=t=>dt.some(e=>t[e]!==void 0),oo=t=>{if(!t)return;let{stdio:e}=t;if(e===void 0)return dt.map(n=>t[n]);if(cu(t))throw new Error(`It's not possible to provide \`stdio\` in combination with one of ${dt.map(n=>`\`${n}\``).join(", ")}`);if(typeof e=="string")return e;if(!Array.isArray(e))throw new TypeError(`Expected \`stdio\` to be of type \`string\` or \`Array\`, got \`${typeof e}\``);let r=Math.max(e.length,dt.length);return Array.from({length:r},(n,i)=>e[i])};var ho=I(require("node:os"),1),mo=I(fo(),1),uu=1e3*5,po=(t,e="SIGTERM",r={})=>{let n=t(e);return lu(t,e,r,n),n},lu=(t,e,r,n)=>{if(!fu(e,r,n))return;let i=hu(r),o=setTimeout(()=>{t("SIGKILL")},i);o.unref&&o.unref()},fu=(t,{forceKillAfterTimeout:e},r)=>du(t)&&e!==!1&&r,du=t=>t===ho.default.constants.signals.SIGTERM||typeof t=="string"&&t.toUpperCase()==="SIGTERM",hu=({forceKillAfterTimeout:t=!0})=>{if(t===!0)return uu;if(!Number.isFinite(t)||t<0)throw new TypeError(`Expected the \`forceKillAfterTimeout\` option to be a non-negative integer, got \`${t}\` (${typeof t})`);return t},_o=(t,e)=>{t.kill()&&(e.isCanceled=!0)},mu=(t,e,r)=>{t.kill(e),r(Object.assign(new Error("Timed out"),{timedOut:!0,signal:e}))},go=(t,{timeout:e,killSignal:r="SIGTERM"},n)=>{if(e===0||e===void 0)return n;let i,o=new Promise((a,u)=>{i=setTimeout(()=>{mu(t,r,u)},e)}),s=n.finally(()=>{clearTimeout(i)});return Promise.race([o,s])},yo=({timeout:t})=>{if(t!==void 0&&(!Number.isFinite(t)||t<0))throw new TypeError(`Expected the \`timeout\` option to be a non-negative integer, got \`${t}\` (${typeof t})`)},wo=async(t,{cleanup:e,detached:r},n)=>{if(!e||r)return n;let i=(0,mo.default)(()=>{t.kill()});return n.finally(()=>{i()})};var bo=require("node:fs"),vo=require("node:child_process");function gt(t){return t!==null&&typeof t=="object"&&typeof t.pipe=="function"}function yr(t){return gt(t)&&t.writable!==!1&&typeof t._write=="function"&&typeof t._writableState=="object"}var pu=t=>t instanceof vo.ChildProcess&&typeof t.then=="function",wr=(t,e,r)=>{if(typeof r=="string")return t[e].pipe((0,bo.createWriteStream)(r)),t;if(yr(r))return t[e].pipe(r),t;if(!pu(r))throw new TypeError("The second argument must be a string, a stream or an Execa child process.");if(!yr(r.stdin))throw new TypeError("The target child process's stdin must be available.");return t[e].pipe(r.stdin),r},So=t=>{t.stdout!==null&&(t.pipeStdout=wr.bind(void 0,t,"stdout")),t.stderr!==null&&(t.pipeStderr=wr.bind(void 0,t,"stderr")),t.all!==void 0&&(t.pipeAll=wr.bind(void 0,t,"all"))};var wt=require("node:fs");var xr=I(Eo(),1),Co=I(To(),1),Ro=t=>{if(t!==void 0)throw new TypeError("The `input` and `inputFile` options cannot be both set.")},xu=({input:t,inputFile:e})=>typeof e!="string"?t:(Ro(t),(0,wt.readFileSync)(e)),Po=t=>{let e=xu(t);if(gt(e))throw new TypeError("The `input` option cannot be a stream in sync mode");return e},Ou=({input:t,inputFile:e})=>typeof e!="string"?t:(Ro(t),(0,wt.createReadStream)(e)),Ao=(t,e)=>{let r=Ou(e);r!==void 0&&(gt(r)?r.pipe(t.stdin):t.stdin.end(r))},No=(t,{all:e})=>{if(!e||!t.stdout&&!t.stderr)return;let r=(0,Co.default)();return t.stdout&&r.add(t.stdout),t.stderr&&r.add(t.stderr),r},vr=async(t,e)=>{if(!(!t||e===void 0)){t.destroy();try{return await e}catch(r){return r.bufferedData}}},Sr=(t,{encoding:e,buffer:r,maxBuffer:n})=>{if(!(!t||!r))return e?(0,xr.default)(t,{encoding:e,maxBuffer:n}):xr.default.buffer(t,{maxBuffer:n})},Do=async({stdout:t,stderr:e,all:r},{encoding:n,buffer:i,maxBuffer:o},s)=>{let a=Sr(t,{encoding:n,buffer:i,maxBuffer:o}),u=Sr(e,{encoding:n,buffer:i,maxBuffer:o}),c=Sr(r,{encoding:n,buffer:i,maxBuffer:o*2});try{return await Promise.all([s,a,u,c])}catch(l){return Promise.all([{error:l,signal:l.signal,timedOut:l.timedOut},vr(t,a),vr(e,u),vr(r,c)])}};var Eu=(async()=>{})().constructor.prototype,Iu=["then","catch","finally"].map(t=>[t,Reflect.getOwnPropertyDescriptor(Eu,t)]),Or=(t,e)=>{for(let[r,n]of Iu){let i=typeof e=="function"?(...o)=>Reflect.apply(n.value,e(),o):n.value.bind(e);Reflect.defineProperty(t,r,{...n,value:i})}},$o=t=>new Promise((e,r)=>{t.on("exit",(n,i)=>{e({exitCode:n,signal:i})}),t.on("error",n=>{r(n)}),t.stdin&&t.stdin.on("error",n=>{r(n)})});var qo=require("node:buffer"),jo=require("node:child_process"),Mo=(t,e=[])=>Array.isArray(e)?[t,...e]:[t],Tu=/^[\w.-]+$/,Cu=/"/g,Ru=t=>typeof t!="string"||Tu.test(t)?t:`"${t.replace(Cu,'\\"')}"`,Er=(t,e)=>Mo(t,e).join(" "),Ir=(t,e)=>Mo(t,e).map(r=>Ru(r)).join(" "),Pu=/ +/g;var Bo=t=>{let e=typeof t;if(e==="string")return t;if(e==="number")return String(t);if(e==="object"&&t!==null&&!(t instanceof jo.ChildProcess)&&"stdout"in t){let r=typeof t.stdout;if(r==="string")return t.stdout;if(qo.Buffer.isBuffer(t.stdout))return t.stdout.toString();throw new TypeError(`Unexpected "${r}" stdout in template expression`)}throw new TypeError(`Unexpected "${e}" in template expression`)},Lo=(t,e,r)=>r||t.length===0||e.length===0?[...t,...e]:[...t.slice(0,-1),`${t[t.length-1]}${e[0]}`,...e.slice(1)],Au=({templates:t,expressions:e,tokens:r,index:n,template:i})=>{let o=i??t.raw[n],s=o.split(Pu).filter(Boolean),a=Lo(r,s,o.startsWith(" "));if(n===e.length)return a;let u=e[n],c=Array.isArray(u)?u.map(l=>Bo(l)):[Bo(u)];return Lo(a,c,o.endsWith(" "))},Tr=(t,e)=>{let r=[];for(let[n,i]of t.entries())r=Au({templates:t,expressions:e,tokens:r,index:n,template:i});return r};var ko=require("node:util"),Uo=I(require("node:process"),1),Fo=(0,ko.debuglog)("execa").enabled,bt=(t,e)=>String(t).padStart(e,"0"),Nu=()=>{let t=new Date;return`${bt(t.getHours(),2)}:${bt(t.getMinutes(),2)}:${bt(t.getSeconds(),2)}.${bt(t.getMilliseconds(),3)}`},Cr=(t,{verbose:e})=>{e&&Uo.default.stderr.write(`[${Nu()}] ${t}
`)};var Du=1e3*1e3*100,$u=({env:t,extendEnv:e,preferLocal:r,localDir:n,execPath:i})=>{let o=e?{...Ge.default.env,...t}:t;return r?Qi({env:o,cwd:n,execPath:i}):o},Wo=(t,e,r={})=>{let n=zo.default._parse(t,e,r);return t=n.command,e=n.args,r=n.options,r={maxBuffer:Du,buffer:!0,stripFinalNewline:!0,extendEnv:!0,preferLocal:!1,localDir:r.cwd||Ge.default.cwd(),execPath:Ge.default.execPath,encoding:"utf8",reject:!0,cleanup:!0,all:!1,windowsHide:!0,verbose:Fo,...r},r.env=$u(r),r.stdio=oo(r),Ge.default.platform==="win32"&&Jo.default.basename(t,".exe")==="cmd"&&e.unshift("/q"),{file:t,args:e,options:r,parsed:n}},Ve=(t,e,r)=>typeof e!="string"&&!Vo.Buffer.isBuffer(e)?r===void 0?void 0:"":t.stripFinalNewline?hr(e):e;function Rr(t,e,r){let n=Wo(t,e,r),i=Er(t,e),o=Ir(t,e);Cr(o,n.options),yo(n.options);let s;try{s=vt.default.spawn(n.file,n.args,n.options)}catch(S){let E=new vt.default.ChildProcess,_=Promise.reject(ke({error:S,stdout:"",stderr:"",all:"",command:i,escapedCommand:o,parsed:n,timedOut:!1,isCanceled:!1,killed:!1}));return Or(E,_),E}let a=$o(s),u=go(s,n.options,a),c=wo(s,n.options,u),l={isCanceled:!1};s.kill=po.bind(null,s.kill.bind(s)),s.cancel=_o.bind(null,s,l);let d=Xi(async()=>{let[{error:S,exitCode:E,signal:_,timedOut:L},A,b,g]=await Do(s,n.options,c),N=Ve(n.options,A),me=Ve(n.options,b),Je=Ve(n.options,g);if(S||E!==0||_!==null){let ce=ke({error:S,exitCode:E,signal:_,stdout:N,stderr:me,all:Je,command:i,escapedCommand:o,parsed:n,timedOut:L,isCanceled:l.isCanceled||(n.options.signal?n.options.signal.aborted:!1),killed:s.killed});if(!n.options.reject)return ce;throw ce}return{command:i,escapedCommand:o,exitCode:0,stdout:N,stderr:me,all:Je,failed:!1,timedOut:!1,isCanceled:!1,killed:!1}});return Ao(s,n.options),s.all=No(s,n.options),So(s),Or(s,d),s}function Bu(t,e,r){let n=Wo(t,e,r),i=Er(t,e),o=Ir(t,e);Cr(o,n.options);let s=Po(n.options),a;try{a=vt.default.spawnSync(n.file,n.args,{...n.options,input:s})}catch(l){throw ke({error:l,stdout:"",stderr:"",all:"",command:i,escapedCommand:o,parsed:n,timedOut:!1,isCanceled:!1,killed:!1})}let u=Ve(n.options,a.stdout,a.error),c=Ve(n.options,a.stderr,a.error);if(a.error||a.status!==0||a.signal!==null){let l=ke({stdout:u,stderr:c,error:a.error,signal:a.signal,exitCode:a.status,command:i,escapedCommand:o,parsed:n,timedOut:a.error&&a.error.code==="ETIMEDOUT",isCanceled:!1,killed:a.signal!==null});if(!n.options.reject)return l;throw l}return{command:i,escapedCommand:o,exitCode:0,stdout:u,stderr:c,failed:!1,timedOut:!1,isCanceled:!1,killed:!1}}var Lu=({input:t,inputFile:e,stdio:r})=>t===void 0&&e===void 0&&r===void 0?{stdin:"inherit"}:{},Go=(t={})=>({preferLocal:!0,...Lu(t),...t});function Ho(t){function e(r,...n){if(!Array.isArray(r))return Ho({...t,...r});let[i,...o]=Tr(r,n);return Rr(i,o,Go(t))}return e.sync=(r,...n)=>{if(!Array.isArray(r))throw new TypeError("Please use $(options).sync`command` instead of $.sync(options)`command`.");let[i,...o]=Tr(r,n);return Bu(i,o,Go(t))},e}var md=Ho();var xt=I(require("fs")),Pe=I(require("path"));var qu=new Ko.HttpClient("depot-build-push-action");async function Yo(){try{let{exitCode:t}=await St.getExecOutput("depot",[],{ignoreReturnCode:!0,silent:!0});return t===0}catch{return!1}}async function Zo(){await St.exec("depot",["version"],{failOnStdErr:!1})}async function Qo(t,e,r){var s,a;let n=await Xo.which(t,!0);console.log(`[command]${n} ${e.join(" ")}`);let i=Rr(n,e,{...r,reject:!1,stdin:"inherit",stdout:"pipe",stderr:"pipe"});i.pipeStdout&&i.pipeStdout(process.stdout),i.pipeStderr&&i.pipeStderr(process.stdout);function o(u){i.kill(u)}process.on("SIGINT",o),process.on("SIGTERM",o);try{let u=await i;if(u.stderr.length>0&&u.exitCode!=0)throw new Error(`failed with: ${((a=(s=u.stderr.match(/(.*)\s*$/))==null?void 0:s[0])==null?void 0:a.trim())??"unknown error"}`)}finally{process.off("SIGINT",o),process.off("SIGTERM",o)}}async function es(t){let e=t.targets.length>0?t.targets:["default"],r=[...Y("--file",t.files),...Y("--no-cache",t.noCache),...Y("--pull",t.pull),...Y("--load",t.load),...Y("--push",t.push),...Y("--set",t.set),...Y("--push",t.push),...Y("--set",t.set),...Y("--metadata-file",ts())],n=[...Y("--project",t.project)],i=[...r,...n,...e],o=t.token??process.env.DEPOT_TOKEN;if(!o)try{let s=await he.getIDToken("https://depot.dev"),a=await qu.postJson("https://github.depot.dev/auth/oidc/github-actions",{token:s});a.result&&a.result.token&&(o=a.result.token,he.info("Exchanged GitHub Actions OIDC token for temporary Depot token"))}catch(s){he.info(`Unable to exchange GitHub OIDC token for temporary Depot token: ${s}`)}try{await Qo("depot",["bake",...i],{cwd:t.workdir,ignoreReturnCode:!0,env:{...process.env,...o?{DEPOT_TOKEN:o}:{}}})}catch(s){if(t.buildxFallback)he.warning(`falling back to buildx: ${s}`),await Qo("docker",["buildx","bake",...r,...e],{ignoreReturnCode:!0});else throw s}}function Y(t,e){return e?e===!0?[t]:Array.isArray(e)?e.flatMap(r=>[t,r]):[t,e]:[]}function ts(){return Pe.join(ot(),"metadata-file").split(Pe.sep).join(Pe.posix.sep)}function rs(){let t=ts();if(!xt.existsSync(t))return;let e=xt.readFileSync(t,{encoding:"utf-8"}).trim();if(e!=="null")return e}async function Mu(){if(!await Yo())return k.setFailed("Depot CLI is not installed. See https://github.com/depot/setup-action to install it before this step.");await k.group("Depot version",async()=>{await Zo()});let t=kn();await es(t);let e=rs();e&&await k.group("Metadata",async()=>{k.info(e),k.setOutput("metadata",e)})}async function ku(){let t=ot();t.length!==0&&(k.startGroup(`Removing temp folder ${t}`),ns.rmSync(t,{recursive:!0}),k.endGroup())}(Yt?ku():Mu()).catch(t=>{t instanceof Error?k.setFailed(t.message):k.setFailed(`${t}`)});
